\chapter{Coordinatization}

\section{Ternary Operations}

Let $\Pi=\igeo$ be a projective plane of order $n$. Fix in $\Pi$ a quad $O,X,Y,E$. Let $\ter$ be a set of $n$ elements, containing $0$ and $1$, but not $\infty$.

Using these elements, we introduce coordinates as follows
$$
    O\colon(0,0),\quad Y\colon(\infty),\quad E\colon(1,1).
$$
In addition, we label the points of $\tr(OE)\setminus\set{O,E,Z}$, where $Z=OE\wedge XY$, according to an arbitrary bijection
\[
    \tr(OE)\setminus\set{O,E,Z}
        \to\set{(\zeta,\zeta)\mid\zeta\ne0,1}.
\]
To label a point $P$ that is not on $OE$ nor on $XY$ with $(a,b)$, we define $a$ and~$b$ by
\begin{equation}\label{eq:P-coordinates}
    OE\wedge YP\colon(a,a)
    \quad\text{and}\quad
    OE\wedge XP\colon(b,b),
\end{equation}
as illustrated here
$$
    \begin{tikzpicture}[
        scale=1.20,
        point/.style={
            draw,
            circle,
            color=black,
            fill=black,
            inner sep=1.2pt},
            every node/.style={font=\footnotesize},
        ]
        \pgfmathsetmacro{\u}{1.7};
        
        % Points
        \coordinate (xstart) at (0.0,0.0);
        \coordinate (xend) at (2*\u,0.0);
        \coordinate (ystart) at (0.0,0.0);
        \coordinate (yend) at (0.0,2*\u);
        \coordinate (E) at (\u,\u*0.8);
        \coordinate (P) at (\u*1.7,\u*1.1);
        
        % Axis
        \draw[name path=xaxis,
            color=orange,
            thick
        ] (xstart) -- (xend)
            node[point,
                pos=0.0,
                label={[xshift=2.5mm,yshift=-7mm]:
                    \textcolor{black}{$O\colon(0,0)$}}
            ] (O) {}
            node[point,
                pos=0.5,
                label={[text=black,xshift=2.5mm,yshift=-7mm]:
                    $X\colon(0)$}
            ] (X) {};
        \draw[name path=yaxis,
            color=orange,
            thick
        ] (ystart) -- (yend)
            node[point,
                pos=0.95,
                label={[text=black,left]:
                    $Y\colon(\infty)$}
            ] (Y) {};
        \node[point,
            label={[xshift=0.0mm,yshift=-10mm]:
                $\begin{array}{c}E\colon\\(1,1)\end{array}$}
        ] at (E) {};
        \draw[name path=OE] (O) -- ($(O)!2.2!(E)$);
        \draw[name path=YP] (Y) -- ($(Y)!1.1!(P)$);
        \path[name intersections={of=OE and YP, by=aa}];
        \node[point,
            fill=green,
            label={[yshift=0.8mm,xshift=-0.4mm]:
                $(a,a)$}
        ] at (aa) {};
        \draw[name path=XP] (X) -- ($(X)!1.7!(P)$);
        \path[name intersections={of=OE and XP, by=bb}];
        \node[point,
            fill=green,
            label={[yshift=-4mm,xshift=5mm]:
                $(b,b)$}
        ] at (bb) {};
        \draw[name path=XY] (X) -- (Y)
            node[pos=0.42,
                label={[xshift=-6.3mm,yshift=-3.5mm]:
                $M\colon(m)$}
            ] (M) {};
        \path[name intersections={of=OE and XY, by=zz}];
        \node[point,
            fill=white,
            label={[xshift=-0.7mm,yshift=-10mm]:
                {$\begin{array}{c}Z\colon\\(1)\end{array}$}}
        ] at (zz) {};
        \node[point,
            fill=green
        ] at (P) {};
        \node[label={[yshift=-3.5mm,xshift=8mm]:
            $P\colon(a,b)$}
        ] at (\u*1.3,\u*0.7) at (P) {};
        \draw[name path=YE] (Y) -- ($(Y)!1.8!(E)$);
        \path[name intersections={of=YE and xaxis,by=Q}];
        \node[point,
            fill=green,
            label={[xshift=4mm]:
                $Q\colon(1,0)$}
        ] at (Q) {};
        \draw[name path=OM] (O) -- ($(O)!1.4!(M)$);
        \path[name intersections={of=YE and OM, by=oneM}];
        \node[point,
            fill=lightblue,
            label={right:$(1,m)$}
        ] at (oneM) {};
        \node[point,
            fill=lightblue,
            ] at (M) {};
        \coordinate (zeroC) at (0,\u*0.4);
        \draw[name path=CX] (zeroC) -- (X);
        \path[name intersections={of=CX and OE,by=cc}];
        \node[point,
            fill=green,
            label={left: $(0,c)$}
        ] at (zeroC) {};
        \node[point,
            fill=green,
            label={[xshift=1mm,yshift=-6.6mm]: $(c,c)$}
        ] at (cc) {};
    \end{tikzpicture}
$$
If $Q=OX\wedge EY$, then $OE\wedge YQ=E\colon(1,1)$ and $OE\wedge XQ\colon(0,0)$. Hence, according to \eqref{eq:P-coordinates}, $Q\colon(1,0)$.

Note, in particular, that when the point $P\ne Y$ is on the line $EY$, it is assigned the coordinates $(1,m)$ for some $m$. This is because the first coordinate is determined by the intersection $PY\wedge OE$. In the special case where $P\incidence EY$ this point is~$E$, whose coordinates are $(1,1)$.

The observation we just made allows us to extend the assignment of coordinates to any point $M$ on $XY$. Since the coordinates of $OM\wedge EY$ have the form $(1,m)$, we assign the coordinate $(m)$ to $M$. In particular, $Z\colon(1)$ and $X\colon(0)$.

Observe that points on $OY$, have coordinates $(0,c)$. Similarly, points on $OX$ have coordinates $(a,0)$.

Here is an algorithmic description of the definition:
    \vspace{-1\parskip}
     {\small\alg
    \begin{enumerate}[itemsep=1.5pt, parsep=0pt]
        \item Complete the set $\set{0,1,\infty}$ with $n-2$ symbols $\set{a,b,c,\dots}$.
        \item Choose a quad $O,X,Y,E$.
        \item Define $Z=OE\wedge XY$.
        \item Label $O\colon(0,0)$, $Y\colon(\infty)$, $E\colon(1,1)$.
        \item For every point on $OE$, distinct from $Z$, choose a label $(\zeta,\zeta)$.
        \item For $P\nincidence XY$
        \begin{enumerate}[-]
            \item Let $(b,b)$ be the label assigned to $XP\wedge OE$.
            \item Let $(a,a)$ be the label assigned to $YP\wedge OE$.
        \end{enumerate}
        Label $P\colon(a,b)$.
        \item For $M$ on $XY$, let $OM\wedge YE\colon(1,m)$. Label $M\colon(m)$.
    \end{enumerate}
    }

Coordinates are further extended to lines. Here we will use square brackets to distinguish them from point coordinates. Given $\block a\in\blocks$, we define
\begin{equation}\label{eq:line-coordinates}
    \block a\colon
        \begin{cases}
            [\infty]    &\text{if }\block a=XY,\\
            [x]   &\text{if }\block a\ne XY,
                \ Y\incidence\block a,\
                \block a\wedge OX\colon(x,0),\\
            [m,b]   &\text{if }
            \ Y\nincidence \block a,
            \ \block a\wedge XY\colon(m),
            \ \block a\wedge OY\colon(0,b),
        \end{cases} 
\end{equation}
\begin{equation}\label{tik:line-coordinates}
    \vcenter{\hbox{
    \begin{tikzpicture}[
        scale=1.2,
        point/.style={
            draw,
            circle,
            color=black,
            fill=black,
            inner sep=1.2pt},
            every node/.style={font=\footnotesize},
        ]
        \pgfmathsetmacro{\u}{1.7};
        
        % Points
        \coordinate (xstart) at (0.0,0.0);
        \coordinate (xend) at (2*\u,0.0);
        \coordinate (ystart) at (0.0,0.0);
        \coordinate (yend) at (0.0,2*\u);
        \coordinate (E) at (\u,\u*0.8);
        \coordinate (P) at (\u*0.4,\u*0.0);
        
        % Axis
        \draw[name path=xaxis,
            color=orange,
            thick
        ] (xstart) -- (xend)
            node[right,text=black] {$[0,0]$}
            node[point,
            pos=0.0,
            label={[yshift=-5mm,xshift=-2mm]:
                \textcolor{black}{$O$}}] (O) {}
            node[point,
                pos=0.5,
                label={[text=black,xshift=-1mm,yshift=-6mm]:
                    $X$}
            ] (X) {};

        \draw[name path=yaxis,
            color=orange,
            thick
        ] (ystart) -- (yend)
            node[above,text=black] {$[0]$}
            node[point,
            pos=0.95,
            label={[text=black,left,yshift=-1mm]:
                $Y$}
            ] (Y) {};
        \node[point,
            label={[yshift=-6mm]:
                $E$}
        ] at (E) {};
        \draw[name path=OE] (O) -- ($(O)!1.5!(E)$)
            node[right] {$[1,0]$};
        \draw[name path=YP] (Y) -- ($(Y)!1.1!(P)$)
            node[xshift=2mm,yshift=-2mm] {$[x]$};
        \node[point,
            fill=green,
            label={[xshift=4mm,yshift=-1mm]:
                $(x,0)$}
        ] at (P) {};
        \draw[name path=OM] (O) -- ($(O)!1.6!(M)$)
            node[right] {$[m,0]$};
        \draw[name path=XY] ($(X)!-0.1!(Y)$) -- (Y)
            node[pos=0,xshift=2.7mm,yshift=-2mm] {$[\infty]$}
            node[pos=0.48,
                label={[left,yshift=-1.5mm]:
                    $(m)$}
            ] (M) {};
        \path[name intersections={of=OE and XY, by=zz}];
        \node[point,
            fill=white,
            label={[xshift=-0.9mm,yshift=-6mm]:
                $Z$}
        ] at (zz) {};
        \draw[name path=YE] (Y) -- ($(Y)!1.2!(E)$)
            node[right] {$[1]$};
        \coordinate (Q) at (0,\u*1.3);
        \draw[name path=QM] (Q) -- ($(Q)!2.1!(M)$)
            node[right] {$[m,b]$};
        \node[point,
            fill=green,
            label={[left]: $(0,b)$}
        ] at (Q) {};
        \path[name intersections={of=OM and YE,by=oneM}];
        \node[point,
            fill=green,
            label={[right,yshift=-0.7mm]:$(1,m)$}
        ] at (oneM) {};
        \node[point,
            fill=lightblue
        ] at (M) {};
    \end{tikzpicture}
    }}
\end{equation}

\begin{rem}
    The interpretation is clear. The line\/ $XY$ is the line at infinity. The slope\/ $m$ of a line\/ $y=mx+b$ is determined by the point where it intersects the line\/ $XY$. The\/ $Y$-intercept\/ $b$ is determined by the line's intersection with the\/ $OY$ axis. Lines with infinite slope (vertical lines) have the form\/ $x=c$ and are assigned the coordinate\/ $[c]$. Every line passing through the origin\/ $O$ has coordinates of the form\/ $[m,0]$ (for finite slopes) or\/ $[0]$ (for the line\/ $OY$ which has infinite slope).
\end{rem}

\begin{xmpl}\label{xmpl:Moulton-coordinatization} [Moulton coordinatization]
    Consider the projective plane associated with the Moulton affine plane of Example~\ref{xmpl:affine-Moulton}.

    We have $O=(0,0)$, $X=\text{horizontal slope}$, $Y=\text{vertical slope}$, and $E=(1,\frac12)$.

    To distinguish cartesian coordinates from the coordinates assigned to points and lines, we will subscript the latter ones with $M$. With this notation, the points on $OE$ have coordinates $(x,x)_M$ that satisfy
    \[
        (x,x)_M=\begin{cases}
            (x,\frac12x) &\text{if }x>0,\\
            (x,x) &\text{if }x\le0.
        \end{cases}
    \]
    By definition, the Moulton coordinates $(u,v)_M$ of a point with cartesian coordinates $(a,b)$, are computed as
    \begin{align*}
        (u,u)_M &= (a,b)Y\wedge OE\\
            &= \set{x=a}\wedge OE\\
            &= \begin{cases}
                    (a,\frac12a)    &\text{if }a>0,\\
                    (a,a)   &\text{if }a\le0.
                \end{cases}\\
            &= (a,a)_M
    \end{align*}
    and
    \begin{align*}
        (v,v)_M &= (a,b)X\wedge OE\\
            &= \set{y=b}\wedge OE\\
            &= \begin{cases}
                    (2b,b)    &\text{if }b>0,\\
                    (b,b)   &\text{if }b\le0.
                \end{cases}\\
            &= \begin{cases}
                (2b,2b)_M   &\text{if }b>0,\\
                (b,b)_M       &\text{if }b\le0.
            \end{cases}
    \end{align*}
    Hence,
    \[
        (u,v)_M = \begin{cases}
            (u,\frac12v)  &\text{if }v>0,\\
            (u,v)   &\text{if }v\le0.
        \end{cases}
    \]
    In particular, $(1,m)_M$ is the point with cartesian coordinates $(1,\frac12m)$ if $m>0$ and $(1,m)$ otherwise. This implies that $(m)_M$ corresponds to the cartesian slope $m$ for $y\le0$, that switches to $\frac12m$ for $y>0$ when $m>0$. Following the construction depicted in \eqref{tik:line-coordinates}, we obtain the visualization below
    $$
        \begin{tikzpicture}[
            scale=0.9,
            font=\footnotesize,
            baseline=(center_ref.base),
            point/.style={draw, circle, fill=black, inner sep=1.0pt, minimum size=1.5pt}
            ]
            \coordinate (center_ref) at (0,0);
            \pgfmathsetmacro{\u}{0.7};
            \pgfmathsetmacro{\m}{3.0*\u}
            \pgfmathsetmacro{\mh}{1.5*\u}
            \coordinate (E) at (3.0,1.5);
            
            % Axes
            \draw[->,thick] (-1.7,0) -- (3.5,0) node[right] {$x$};
            \draw[->,thick] (0,-1.7) -- (0,2.4) node[above] {$y$};
            \draw (-1.5,-1.5) -- (0,0) -- (E);
            \path let \p1 = (E) in
                coordinate (MM) at (\m,\mh)
                coordinate (1Mx) at (\m,0)
                coordinate (1My) at (0,\mh)
                node[label={[yshift=-5.5mm]:$m$}] at (1Mx) {}
                node[label={[yshift=-5.5mm]:$1$}] at (\x1,0) {}
                node[label={[xshift=-3.5mm,yshift=-4.2mm]:$\frac12m$}] at (1My) {}
                (0,{\y1*\u}) edge[dotted] (MM)
                ({\x1*\u},0) edge[dotted] (MM)
                (\x1,0) edge[gray] (E)
                (MM) edge[dotted] (\x1,{\y1*\u})
                (0,0) edge[-latex,color=orange] ({\x1*1.5},{\y1*\u*1.5})
                (0,0) edge[-latex,color=orange] ({-\x1*0.5},{-\m*0.5})
                node[label={[right]:$(m)_M$}] at ({\x1*1.5},{\y1*\u*1.5}) {}
                node[point,
                    fill=green,
                    label={[xshift=-6mm,yshift=-1mm]:$(m,m)_M$}
                ] at ({\x1*\u},{\y1*\u}) {}
                node[point,
                    fill=green,
                    label={[xshift=6.5mm,yshift=-5mm]:$(1,m)_M$}
                ] at (\x1,{\y1*\u}) {};
                \node[point,
                label={[yshift=-0.5mm]:$E\colon(1,1)_M$}
            ] at (E) {};
    \end{tikzpicture}
    $$
    It follows that, for $m>0$, the line $[m,b]_M$ has slope $\frac12m$ and passes through $(0,b)_M=(0,\frac12b)$ if $b\ge0$ or $(0,b)$ if $b<0$.
    $$
        \begin{tikzpicture}[
            scale=0.9,
            font=\small,
            baseline=(center_ref.base)
            ]
            \coordinate (center_ref) at (0,0);
            % Axes
            \draw[->,thick] (-1.7,0) -- (3.5,0) node[right] {$x$};
            \draw[->,thick] (0,-2.1) -- (0,3.5) node[above] {$y$};
            
            % Line d: positive slope with bending
            \def\xz{-1.5}
            \def\yz{-1.8}
            \def\u{1.0}
            \def\v{2.0}
            \pgfmathsetmacro{\xi}{(2*\v*\xz-\yz*\u)/(2*\v-\yz)}
            \draw[name path=d1] (\xz,\yz) -- (\xi,0);
            \pgfmathsetmacro{\mh}{\v/(\u-\xi)};
            \pgfmathsetmacro{\m}{\mh*2};
            
            % Define the y-intercept (b value)
            \pgfmathsetmacro{\b}{\yz-\m*\xz}
            \pgfmathsetmacro{\bh}{\v-\mh*\u}

            % Draw the line using two points
            \draw[name path=d2] (\xi,0) -- (1.2,{\mh*1.2+\bh}) 
                node[right]{$y=\frac12mx+\frac12b$};
            
            \draw[name path=ds,dashed] (\xi,0) -- (0.6,{\m*0.6+\b})
                node[right]{$y=mx+b$};

            \coordinate (A) at ({\xz+0.3},{\m*(\xz+0.3)+\b});
            \draw[fill=black] (A) circle (1.5pt) node[below right,xshift=-1mm] at (A) {$(x_0,y_0)$};
            \coordinate (B) at (0,\b);
            \draw[fill=black] (B) circle (1.5pt) node[xshift=-2.5mm] at (B) {$b$};

            \coordinate (B) at ({\xi+1.5},{\mh*(\xi+1.5)+\bh});
            \draw[fill=black] (B) circle (1.5pt) node[below right,xshift=-1mm]{$(x_1,\frac12y_1)$};

            \coordinate (C) at ({\xi},0);
            \draw[fill=white] (C) circle (1.5pt) node[xshift=2mm,yshift=-3.0mm]{$-\frac bm$};           
        \end{tikzpicture}
        \quad
            \begin{tikzpicture}[
            scale=0.9,
            font=\small,
            baseline=(center_ref.base)
            ]
            \coordinate (center_ref) at (0,0);
            % Axes
            \draw[->,thick] (-0.7,0) -- (4.5,0) node[right] {$x$};
            \draw[->,thick] (0,-2.1) -- (0,3.5) node[above] {$y$};
            
            % Line d: positive slope with bending
            \def\xo{-1.5}
            \pgfmathsetmacro{\dx}{-1.4}
            \pgfmathsetmacro{\xz}{\xo-\dx}
            \pgfmathsetmacro{\yz}{-1.8}
            \pgfmathsetmacro{\u}{1.0-\dx}
            \pgfmathsetmacro{\v}{2.0*(\u+\dx)}
            \pgfmathsetmacro{\xi}{(2*\v*\xz-\yz*\u)/(2*\v-\yz)}
            \draw[name path=d1] (\xz,\yz) -- (\xi,0);
            \pgfmathsetmacro{\mh}{\v/(\u-\xi)};
            \pgfmathsetmacro{\m}{\mh*2};
            
            % Define the y-intercept (b value)
            \pgfmathsetmacro{\b}{\yz-\m*\xz}
            \pgfmathsetmacro{\bh}{\v-\mh*\u}

            % Draw the line using two points
            \draw[name path=d2] (\xi,0) -- (1.2-\dx,{\mh*(1.2-\dx)+\bh}) 
                node[right]{$y=\frac12mx+\frac12b$};

            \draw[dashed] (\xi,0) -- (0,\bh);
                        
            \draw[name path=ds,dashed] (\xi,0) -- (0.6-\dx,{\m*(0.6-\dx)+\b})
                node[right]{$y=mx+b$};

            \coordinate (A) at ({\xz+0.3},{\m*(\xz+0.3)+\b});
            \draw[fill=black] (A) circle (1.5pt) node[right] at (A) {$(x_0,y_0)$};
            \coordinate (B) at (0,\b);
            \draw[fill=black] (B) circle (1.5pt) node[xshift=-2.5mm] at (B) {$b$};

            \coordinate (B) at ({\xi+1.5},{\mh*(\xi+1.5)+\bh});
            \draw[fill=black] (B) circle (1.5pt) node[below right,xshift=-1mm]{$(x_1,\frac12y_1)$};

            \draw[fill=black] (0,\bh) circle (1.5pt) node[left,xshift=-0.5mm]{$\frac12b$};

            \coordinate (C) at ({\xi},0);
            \draw[fill=white] (C) circle (1.5pt) node[xshift=2mm,yshift=-3.0mm]{$-\frac bm$};       
        \end{tikzpicture}
    $$
    The following table summarizes the translation of $(x,y)_M\incidence_M{[m,b]_M}$ to cartesian coordinates for $m>0$
    \[
        \begin{array}{c|cc}
                &x>-\frac bm &x\le-\frac bm\\[2mm]
            \hline\rule{0mm}{4mm}
            b>0
                &(x,\frac12y)\incidence{[\frac12m,\frac12b]}
                &(x,y)\incidence{[m,b]}\\[2mm]
            b<0
                &(x,\frac12y)\incidence{[\frac12m,\frac12b]}
                &(x,y)\incidence{[m,b]}
            \end{array}
    \]
    Thus, for $m>0$, we have
    \[
        (x,y)_M\incidence_M{[m,b]_M} \iff y=mx+b.
    \]
    For $m\le0$, the incidence relation $(x,y)_M\incidence_M{[m,b]_M}$ translates into
    \[
        \begin{array}{c|cc}
                &y>0 &y\le0\\[2mm]
            \hline\rule{0mm}{4mm}
            b>0
                &(x,\frac12y)\incidence{[m,\frac12b]}
                &(x,y)\incidence{[m,\frac12b]}\\[2mm]
            b<0
                &(x,\frac12y)\incidence{[m,b]}
                &(x,y)\incidence{[m,b]}
            \end{array}
    \]
    or
    \[
        \begin{cases}
            y=2mx+b     &b\ge0,\ x\le-\frac b{2m},\\[1mm]
            y=mx+\frac12b   &b\ge0,\ x\ge-\frac b{2m},\\[1mm]
            y=2mx+2b    &b\le0,\ x\le-\frac bm,\\[1mm]
            y=mx+b      &b\le0,\ x\ge-\frac bm.
        \end{cases}
    \]
\end{xmpl}

\begin{prop}\label{prop:coodinatization-maps}
    The maps defined above
    \begin{align*}
        \begin{aligned}
            \sigma\colon\pts
                &\to\set{(\infty)}\cup\ter\cup(\ter\times\ter)\\
            P&\mapsto\begin{cases}
                (\infty)    &\text{\upshape if }P=Y,\\
                (m)     &\text{\upshape if }P\incidence XY,\;P\ne Y,\\
                (a,b)   &\text{\upshape if }P\nincidence XY
            \end{cases}
        \end{aligned}
        &&\begin{aligned}
            \gamma\colon\blocks
                &\to\set{[\infty]}\cup\ter\cup(\ter\times\ter)\\
            \block a&\mapsto\begin{cases}
                [\infty]    &\text{\upshape if }\block a=XY,\\
                [x]         &\text{\upshape if }Y\incidence\block a,\\
                [m,b]       &\text{\upshape if }Y\nincidence\block a
            \end{cases}
        \end{aligned}
    \end{align*}
    are bijective.\footnote{We use $\sigma$ after the Greek word \foreignlanguage{greek}{σημείο} (point) and $\gamma$ after \foreignlanguage{greek}{γραμμή} (line).}
\end{prop}

\begin{proof}
    Suppose that $\sigma(P)=\sigma(Q)$. Let $v$ be this common value. There are four cases:
    \begin{enumerate}[1.]
        \item If $v=\infty$, then $P=Y=Q$.
        
        \item If $v=(a,a)$, then $P=Q$ because, by construction, there is a bijection between these pairs and the points incident with $OE$.
        
        \item If $v=(a,b)$, then $PY\wedge OE=QY\wedge OE$ and $PX\wedge OE=QX\wedge OE$. Let $A$ be the first of these two points and $B$ the second. By the \rr\ $P,Q\incidence Y\!A$ and $P,Q\incidence XB$. Hence, $P=Y\!A\wedge XB=Q$.
        
        \item If $v=(m)$, then $P,Q\incidence XY$ and $\sigma(OP\wedge Y\!E)=(1,m)=\sigma(OQ\wedge Y\!E)$. By the previous case, $OP\wedge Y\!E=OQ\wedge Y\!E$. Let $C$ denote this common value. By the \rr\ $P,Q\incidence OC$. Hence, $P=OC\wedge XY=Q$.
    \end{enumerate}
    It follows that $\sigma$ is injective. Since domain and codomain have the same number of elements, the map is bijective.

    To verify that $\gamma$ is bijective suppose $\gamma(\block a)=\gamma(\block b)$. Let $w$ be this common value. There are three cases:
    \begin{enumerate}[1.]
        \item If $w=[\infty]$, then $\block a=XY=\block b$.

        \item If $w=(m,b)$, then
        \begin{align*}
            \sigma(\block a\wedge XY)&=(m)=\sigma(\block b\wedge XY)\\
            \sigma(\block a\wedge OY)&=(0,b)=\sigma(\block b\wedge OY).
        \end{align*}
        By the injectivity of $\sigma$, we deduce that
        \begin{align*}
            \block a\wedge XY=\block b\wedge XY
            \quad\text{and}\quad
            \block a\wedge OY=\block b\wedge OY.
        \end{align*}
        Let $P$ and $Q$ denote the common values of these expressions. Since $Y\nincidence\block a,\block b$, we deduce that $P\ne Q$ and so $\block a=PQ=\block b$.
        
        \item If $w=[x]$, then $Y\incidence\block a,\block b$ and $\sigma(\block a\wedge OX)=(x,0)=\sigma(\block b\wedge OX)$. Hence, $\block a\wedge OX=\block b\wedge OX$. Thus, if $C$ is the common value of these two expressions, then $C\ne Y$ since $X,Y,O$ are not collinear, and so $\block a=YC=\block b$.
    \end{enumerate}
    Thus, $\gamma$ is injective and, \textit{a fortiori}, bijective because domain and codomain are equipotent.
\end{proof}

\begin{prop}
    The homogeneous coordinates of $\PG(2,q)$ are compatible with the coordinates introduced above for the abstract finite projective plane with $\ter=\Fq$.
\end{prop}

\begin{proof}
    Take $O=[0:0:1]$, $X=[1:0:0]$, $Y=[0:1:0]$, $E=[1:1:1]$. Then
    \[
        OX\equiv y=0,\quad OY\equiv x=0,\quad
        OE\equiv x=y,\quad XY\equiv z=0,\quad
        EY\equiv x=z.
    \]
    It follows that $Z=XY\wedge OE=[1:1:0]$.
    We have the following cases
    \begin{enumerate}[-]
        \item Points on $OE$ other than $Z$ have coordinates $[a:a:1]$.

        \item If $P\nincidence OE$, then $P=[a:b:1]$ and so
        \begin{align*}
            YP\wedge OE\equiv(x=az)\wedge(x=y)
                &\implies YP\wedge OE=[a:a:1]\\
            XP\wedge OE\equiv(y=bz)\wedge(x=y)
                &\implies XP\wedge OE=[b:b:1].
        \end{align*}
    
        \item If $P\incidence XY$, $P\ne Y$, then $P=[1:m:0]$. Hence,
        \[
        EY\wedge OP\equiv(x=z)\wedge(y=m x)
        \]
        Thus, $EY\wedge OP=[1:m:1]$.
    
        \item If $P\incidence OY$, $P\ne Y$, then $P=[0:c:1]$
        \[
            XP\wedge OE\equiv(y=cz)\wedge(x=y),
        \]
        which implies $XP\wedge OE=[c:c:1]$.

        \item If $P\incidence OX$, $P\ne X$, then $P=[a:0:1]$.
    \end{enumerate}
    In conclusion, we have the following bijection between homogeneous and abstract coordinates:
    \begin{align*}
        \sigma\colon[x:y:1] &\mapsto (x,y)\\
        \sigma\colon[x:y:0] &\mapsto (y/x)
    \end{align*}
    with the convention $1/0=\infty$.

    The same idea works for lines:
    \begin{align*}
        \gamma\colon(m:-1:b) &\mapsto[m,b]\\
        \gamma\colon(u:0:v) &\mapsto[-v/u]
    \end{align*}
    In particular,

    \vspace{-1.5\parskip}
    {\small
    \[
        \begin{array}{c|clc}
            {\text{line}} & \text{equation} & \text{homogeneous} &\text{coordinates}\\
            \hline\rule{0pt}{10pt}
            OX &  y=0 & (0:1:0) & [0,0]\\
            OY &  x=0 & (1:0:0) & [0]\\
            OE &  x=y & (1:-1:0) & [1,0]\\
            XY &  z=0 & (0:0:1) & [\infty]\\
            EY &  x=z & (1:0:-1) & [1]\\
        \end{array}
    \]}
\end{proof}

\begin{test}
    Consider the Fano plane

    \vspace{-2\parskip}
    $$
    \begin{tikzpicture}[
        scale=1.1,
        font=\small,
        point/.style={draw, circle, fill=black, inner sep=1.5pt, minimum size=4pt}
        ]
     
        % Points
        \coordinate (X) at (90:1.5);
        \coordinate (Y) at (210:1.5);
        \coordinate (O) at (330:1.5);
        \coordinate (P3) at ($(X)!0.5!(Y)$);
        \coordinate (P1) at ($(Y)!0.5!(O)$);
        \coordinate (P2) at ($(O)!0.5!(X)$);
        
        % Center
        \coordinate (E) at (0,0);
        
        % Lines
        \draw (X) -- (P3) -- (Y);
        \draw (Y) -- (P1) -- (O);
        \draw (O) -- (P2) -- (X);
        \draw (X) -- (E) -- (P1);
        \draw (Y) -- (E) -- (P2);
        \draw (O) -- (E) -- (P3);
        
        \draw (E) circle (0.75cm);
        
        % Point labels
        \node[point, label=above:$X$] at (X) {};
        \node[point, label=left:$Y$] at (Y) {};
        \node[point, label=right:$O$] at (O) {};
        \node[point, fill=white, label=left:$3$] at (P3) {};
        \node[point, fill=green, label=below:$1$] at (P1) {};
        \node[point, fill=green, label=right:$2$] at (P2) {};
        \node[point, label={[label distance=2pt]left:$E$}] at (E) {};
    \end{tikzpicture}
    $$
    Following the algorithm of coordinatization, we get
    
    \vspace{-0.5\parskip}
     {\small\alg
    \begin{enumerate}[itemsep=1.8pt, parsep=0pt]
        \item Symbols: $\set{0,1,\infty}$.
        \item Quad: $O,X,Y,E$.
        \item Define $Z=OE\wedge XY=3$.
        \item Assign $O\colon(0,0)$, $Y\colon(\infty)$, $E\colon(1,1)$.
        \item Empty for $n=2$.
        \item \begin{enumerate}[-,itemsep=1.8pt, parsep=0pt]
                \item $X1\wedge OE=E\colon(1,1)$ and $Y1\wedge OE=O\colon(0,0)$ and label $1\colon(0,1)$
                \item $X2\wedge OE=O\colon(0,0)$ and $Y2\wedge OE=E\colon(1,1)$ and label $2\colon(1,0)$.
            \end{enumerate}
        \item \begin{enumerate}[-,itemsep=1.8pt, parsep=0pt]
                \item For $M=3$ let $OM\wedge YE=E\colon(1,1)$, label $3\colon(1)$.
                \item For $M=X$ let $OX\wedge YE=2\colon(1,0)$, label $X\colon(0)$.
            \end{enumerate}
    \end{enumerate}
    }
    \vspace{-1\parskip}
    We can now compare with the homogenous coordinates of Proposition~\ref{prop:Fano=PG(2,2)} that would have assigned
    \begin{align*}
        X&=[1:0:0]  &Y&=[0:1:0] &O&=[0:0:1] &E&=[1:1:1]\\
        3&=[1:1:0]  &2&=[1:0:1] &1&=[0:1:1].
    \end{align*}
\end{test}

\begin{lem}\label{lem:ternary-full-domain}
    Let\/ $\Pi$ be a projective plane of order\/ $n$ with coordinatization based on the quad\/ $O,X,Y,E$ and the set of symbols~$\ter$. Then
    \begin{enumerate}[a),font=\upshape]
        \item Every point on\/ $[x]$ has coordinates\/ $(x,y)$ for some\/ $y\in\ter$.
        \item Given\/ $x,y,m\in\ter$, there is a unique\/ $b$ such that\/ $(x,y)\incidence{[m,b]}$.
    \end{enumerate}
\end{lem}

\begin{proof}${}$
    \begin{enumerate}[a)]
        \item By \eqref{eq:line-coordinates} we have ${(\infty)}\incidence{[x]}$ and $(x,0)\incidence{[x]}$. Thus, $[x]=(x,0)(\infty)$. Since the definition of $(x,0)$ implies $(x,0)(\infty)\wedge[1,0]=(x,x)$, we deduce that $[x]\wedge[1,0]=(x,x)$. The conclusion follows from~\eqref{eq:P-coordinates}.

        \item As we have already observed, the points on the line $[0]$ have $0$ as their first coordinate. Thus, $(m)(x,y)\wedge[0]=(0,b)$ for some $b\in\ter$. In particular, $(0,b)\incidence(m)(x,y)$. By the \rr\ $(x,y)\incidence(m)(0,b)$. The conclusion follows because $(m)(0,b)=[m,b]$ by \eqref{eq:line-coordinates}.  %\qedhere
    \end{enumerate}
\end{proof}

\begin{defn}
    A \textsl{ternary operation} on the set\/ $\ter$ is a map
    \begin{align*}
        T\colon\ter\times\ter\times\ter&\to\ter\\
        (x,m,b)&\mapsto T(x,m,b).
    \end{align*}
\end{defn}

\begin{defn}\label{defn:ternary-ring}
    The algebraic structure $(\ter,T)$, where $T$ is a ternary operation, is called a \textsl{ternary ring of order}~$n$ if $\ter$ has $n$ elements and the following axioms hold:
    \begin{enumerate}[
        label=tr$_{\arabic*}$,
        ref={\upshape\scshape tr$_{\arabic*}$},
        font=\scshape]
        \item\label{TR1} For every\/ $x,m,b \in \ter$, we have
        \[
            \textsc{i) } T(x,0,b) = T(0,m,b) =b
            \quad\text{and}\quad
            \textsc{ii) } T(1,x,0) = T(x,1,0) =x.
        \]
        \item\label{TR2} If\/ $x,y,x',y' \in \ter$ are given and\/ $x\ne x'$, then there exists a unique pair\/ $(m,b) \in \ter \times \ter$ for which\/ $T(x,m,b)=y$ and\/ $T(x',m,b)=y'$.
        
        \item\label{TR3} For every\/ $x,y,m\in\ter$ there is a unique\/ $b\in\ter$ for which\/ $y=T(x,m,b)$.
        
        \item\label{TR4} If\/ $m,b,m',b'\in\ter$ are given and\/ $m\ne m'$, then there is a unique\/ $x\in\ter$ for which\/ $T(x,m,b) = T(x,m',b')$.
    \end{enumerate}
    When \ref{TR1} \textsc{ii)} is relaxed to only require $T(1,1,0)=1$, the resulting structure is called \textsl{ternary prering}.
\end{defn}


\begin{prop}\label{prop:ternary-properties}
    The ternary operation of a projective plane given by
        \[
            T(x,m,b)=y \iff (x,y)\incidence {[m, b]}
        \]
    defines a ternary ring.
\end{prop}

\needspace{2\baselineskip}
\begin{proof}${}$
    \begin{enumerate}[tr$_\arabic*$:,font=\scshape]
        \item From \eqref{eq:line-coordinates} we obtain $[0,b]\wedge[\infty]=(0,b)$ and $[0,b]\wedge[0,0]=(0)$. In particular, $(0,b),(0)\incidence{[0,b]}$. Then $[0,b]=(0,b)(0)$ and so $(x,b)\incidence{[0,b]}$, as illustrated below. Hence, the definition of $T$ implies $T(x,0,b)=b$.
        $$
            \begin{tikzpicture}[
                scale=1.1,
                font=\small,
                point/.style={
                    draw,
                    circle,
                    color=black,
                    fill=green,
                    inner sep=1.2pt},
                    every node/.style={font=\footnotesize},
                ]
                \pgfmathsetmacro{\u}{1.7};
                
                % Points
                \coordinate (xstart) at (0.0,0.0);
                \coordinate (xend) at (2*\u,0.0);
                \coordinate (ystart) at (0.0,0.0);
                \coordinate (yend) at (0.0,2*\u);
                \coordinate (E) at (\u,\u*0.8);
                \coordinate (0b) at (0,\u*0.6);
                \coordinate (x0) at (\u*0.3,0);
                \coordinate (O) at (0.0,0.0);
                
                % Axes
                \draw[name path=xaxis,
                    color=orange,
                    thick
                ] (xstart) -- (xend)
                    node[right,text=black] {$[0,0]$}
                    node[point,
                        fill=black,
                        pos=0.5,
                        label={[text=black,xshift=0mm,yshift=-7mm]:
                            $(0)$}
                    ] (X) {};
                \draw[name path=yaxis,
                    color=orange,
                    thick
                ] (ystart) -- (yend)
                    node[above,text=black] {$[0]$}
                    node[point,
                    pos=0.95,
                    fill=black,
                    label={[text=black,left,yshift=-1mm]:
                        $(\infty)$}
                    ] (Y) {};
                \node[point,
                    fill=black,
                    label={[yshift=-5mm,xshift=5mm]:
                        $(1,1)$}
                ] at (E) {};
                \draw[name path=xY] (Y) -- ($(Y)!1.1!(x0)$)
                    node[below] {$[x]$};
                \draw[name path=OE] (O) -- ($(O)!1.4!(E)$)
                    node[right] {$[1,0]$};
                \draw[name path=Xb,thick] (0b) -- ($(0b)!1.4!(X)$)
                    node[right] {$[0,b]$};
                
                \path[name intersections={of=xY and Xb,
                    by=Pxb}];
                \path[name intersections={of=xY and OE,
                    by=xx}];
                \path[name intersections={of=Xb and OE,
                    by=bb}];
                \node[point,
                    label={[xshift=3.3mm,yshift=-1mm]:$(x,b)$}
                ] at (Pxb) {};
                \node[point,
                    label={[xshift=4mm,yshift=-5mm]:$(x,x)$}
                ] at (xx) {};
                \node[point,
                    label={[xshift=5mm,yshift=-3mm]:$(b,b)$}
                ] at (bb) {};
                \node[point,
                    label={[left]:$(0,b)$}
                ] at (0b) {};
                \node[point,
                    fill=black,
                    label={[yshift=-7mm,xshift=-2mm,text=black]:
                        $(0,0)$}
                ] at (O) {};
            \end{tikzpicture}
        $$
        Equality $T(0,m,b)=b$ follows as it simply means $(0,b)\incidence{[m,b]}$.

        To see that $T(1,x,0)=x$ it is enough to observe that $(1,x)\incidence{[x,0]}$, which is easily verified as depicted in~\eqref{tik:line-coordinates} for $x=m$.

        For $T(x,1,0)=x$ it suffices to recall that, by definition, $(x,x)\incidence{[1,0]}$.

        \item Let $P$ and $P'$ be points of the plane such that $P\colon(x,y)$ and $P'\colon(x',y')$. Since $x\ne x'$, it follows that $P\ne P'$, so the line $\block a=PP'$ is well-defined. Moreover, $Y\nincidence\block a$, for otherwise we would have $PY=P'Y$, which is impossible because $PY\colon[x]$, $P'Y\colon[x']$, and $[x]\ne[x']$. Then, by~\eqref{eq:line-coordinates}, we have $\block a\colon[m,b]$, and the conclusion follows.

        \item This is equivalent to part~b) of Lemma~\ref{lem:ternary-full-domain}.

        \item Let $\block a$ and $\block a'$ be two lines such that $\block a\colon[m,b]$ and $\block a'\colon[m',b']$. Since $m\ne m'$, it follows that $\block a\ne\block a'$, so the point $P=\block a\wedge\block a'$ is well-defined. Let $P\colon(x,y)$. Then, $P\incidence\block a$ and $P\incidence\block a'$ translate into $(x,y)\incidence{[m,b]}$ and $(x,y)\incidence{[m',b']}$, as desired. %\qedhere

    \end{enumerate}
\end{proof}


\begin{thm}\label{thm:projective-plane-of-ternary-ring}
    Every ternary prering coordinatizes some projective plane.  
\end{thm}

\begin{proof} Let $(\ter,T)$ be a ternary prering. Introduce
    \begin{align*}
        \pts &= \set{(\infty)}\cup\set{(c)\mid c\in\ter}
                \cup\set{(a,b)\mid a,b\in\ter}\\
        \blocks &= \set{[\infty]}\cup\set{[x]\mid x\in\ter}
                \cup\set{[m,b]\mid m,b\in\ter}
    \end{align*}
    The incidence relation is defined in the following table, where $\textsc t$ and $\textsc f$ stand for true and false, and $x,y,c,m,b$ are elements of $\ter$,
    \begin{equation}\label{tbl:incidence}
        \begin{array}{c|ccc}
            \incidence& {[\infty]} & {[c]} & {[m,b]}\\
            \hline\rule{0pt}{10pt}
            {(\infty)} &\textsc t &\textsc t &\textsc f \\
            {(x)} &\textsc t &\textsc f &x=m \\
            {(x,y)} &\textsc f &x=c &y=T(x,m,b)
        \end{array}        
    \end{equation}
    To verify axioms \ref{P1}, \ref{P2} and \Ptprime, we proceed as follows:
    \begin{description}[font=\normalfont\small\scshape]
        \item[Axiom p$_1$:]
        $$
            \begin{array}{c|ccc}
                & {(\infty)} & {(c')} & {(x',y')}\\
                \hline\rule{0pt}{10pt}
                {(\infty)} &&{[\infty]}&{[x']} \\
                {(c)} &{[\infty]} &{[\infty]}&1\\
                {(x,y)} &{[x]} &1 &2
            \end{array}
        $$
        \needspace{2\baselineskip}
        where
        \begin{enumerate}
            \item By table \eqref{tbl:incidence}, the line $[m,b]$ passes through the points $(c)$ and $(x,y)$ if, and only if, $c=m$ and $y=T(x,m,b)$. Thus, we have to show that there exists $b$ satisfying $y=T(x,c,b)$. But this follows from \ref{TR3}.

            \item This is Axiom \ref{TR2}.
        \end{enumerate}

        \item[Axiom p$_2$:]
        $$
            \begin{array}{c|ccc}
                \wedge& {[\infty]} & {[c']} & {[m',b']}\\
                \hline\rule{0pt}{10pt}
                {[\infty]} &&{(\infty)}&{(m')} \\
                {[c]} &{(\infty)} &{(\infty)}&3\\
                {[m,b]} &{(m)} &3 &4
            \end{array}
        $$
        where
        \begin{enumerate}
            \item[3.] By Table~\eqref{tbl:incidence}, the point $(x,y)$ lies on both $[c]$ and $[m,b]$ if, and only if, $x=c$ and $y=T(c,m,b)$.

            \item[4.] If $m\ne m'$, then by \ref{TR4} there exists a unique pair $(x,y)$ incident with both $[m,b]$ and $[m',b']$. If $m=m'$ and $b\ne b'$, the two lines intersect at $(m)$, on the line $[\infty]$.

        \item[Axiom p$_3$\!':] We claim that the points
        \[
            O=(0,0),\quad X=(0),
                \quad Y=(\infty),\quad E=(1,1)
        \]
        are in general position. To see this, it is enough to prove the following equations
        \[
            OX=[0,0],\quad OE=[1,0],\quad XY=[\infty]
        \]
        and verify the \qr:
        {\small
        $$
            \begin{array}{cccc}
                 O&X&Y&E\\
                 \mbf\cdot&\mbf\cdot&\mbf\cdot\\
                 \mbf\cdot&\mbf\cdot&&\mbf\cdot\\
                 \mbf\cdot&&\mbf\cdot&\mbf\cdot\\
                 &\mbf\cdot&\mbf\cdot&\mbf\cdot
            \end{array}
        $$}
        \begin{enumerate}[-]
            \item $OX=[0,0]$ by \ref{TR1} \textsc i) and axiom \PP1.
                \begin{enumerate}[$\to$]
                    \item $(\infty)\nincidence{[0,0]}$ by table \eqref{tbl:incidence}.
                    \item $(1,1)\nincidence{[0,0]}$ because $T(1,0,0)=0\ne1$ by \ref{TR1} \textsc i).
                \end{enumerate}
            \item $OE=[1,0]$, since $T(0,1,0)=0$ by \ref{TR1} \textsc i) and $T(1,1,0)=1$ by the relaxed version of \textsc{ii)}. Moreover, $(\infty)\nincidence{[1,0]}$ by \eqref{tbl:incidence}.
            \item $XY=[\infty]$ since \eqref{tbl:incidence} implies $(0)\incidence{[\infty]}$ and $(\infty)\incidence{[\infty]}$. Furthermore, $(1,1)\nincidence{[\infty]}$ by \eqref{tbl:incidence}.
        \end{enumerate}
        \end{enumerate}
    \end{description}
\end{proof}

\begin{ntn}\label{ntn:plane-assciated-to-ternary-ring}
    The projective plane associated with the ternary prering\/ $(\ter,T)$ by {\upshape Theorem~\ref{thm:projective-plane-of-ternary-ring}} will be denoted
    \[
        \Pi_T=(\pts_T,\blocks_T,\incidence_T).\footnote{Since $T\colon\ter\times\ter\times\ter\to\ter$, there is no need to include $\ter$ in the subscript.}
    \]

    This projective plane is of the same order as\/~$\ter$. Furthermore, for\/ $\Pi_T$ the bijections\/ $\sigma$ and\/ $\gamma$ of\/ {\upshape Proposition~\ref{prop:coodinatization-maps}} are both the identity.
\end{ntn}


\begin{lem}\label{lem:isomorphic-coordinatized-projective-plane}
    Let\/ $\Pi=\igeo$ be a projective plane of order\/~$n$, and let\/ $\ter$ be a set of\/~$n$ elements containing\/ $0,1$ but not\/~$\infty$. Then the coordinatization of\/~$\Pi$ based on\/ $\ter$ and on a quad\/ $O,X,Y,E$ yields a ternary ring\/ $(\ter,T)$ whose associated projective plane is isomorphic to\/~$\Pi$. Moreover, the collineation between both projective planes maps\/ $(O,X,Y,E)$ to\/ $((0,0),(0),(\infty),(1,1))$.
\end{lem}


\begin{proof}
    Let $\Pi_T=(\pts_T,\blocks_T,\incidence_T)$ be the projective plane associated with $(\ter,T)$. Consider the bijections
    \begin{align*}
        \sigma\colon\pts&\to\pts_T\\
        \gamma\colon\blocks&\to\blocks_T 
    \end{align*}
    defined in Proposition~\ref{prop:coodinatization-maps}. We claim that $(\sigma,\gamma)$ is a collineation. To prove this, we have to show that if $P\incidence\block a$, then $\sigma(P)\incidence_T\gamma(\block a)$. We will say that the flag $(P,\block a)$ is \textsl{good} if the coordinates of $P$ and $\block a$ satisfy the incidence relation. There are several cases for $\sigma(P)$ and $\gamma(\block a)$, namely
    {\small
    \[
        \begin{array}{c|ccc}
            &{[\infty]}&{[a]}&{[m,b]}\\
            \hline\rule{0pt}{10pt}
            (\infty)&\checkmark&\checkmark&\text-\\
            (c)&\checkmark&\text-&1\\
            (x,y)&\text-&2&3
        \end{array}
    \]
    }
    
    Check marks stand for cases where the flag is clearly good; the dash for impossible cases. Let's analyze the three possibilities left
    \begin{enumerate}
        \item Here $P\ne Y$, $P\incidence XY$, $Y\nincidence\block a$, $\block a\wedge XY\colon(m)$, and $\block a\wedge OY\colon(0,b)$. It follows that $P=\block a\wedge XY\colon(m)$. Hence, $c=m$, and since $(m)$ is on $[m,b]$, the flag is good.
        
        \item In this case, $P\nincidence XY$, $PY\wedge OE\colon(x,x)$, $PX\wedge OE\colon(y,y)$, $Y\incidence\block a$, $\block a\ne XY$, and $\block a\wedge OX\colon(a,0)$. Then $PY=\block a$ and so $x=a$. Thus, $(x,y)=(a,y)$ which is on $[a]$, i.e., the flag is good.

        \item As before, $P\nincidence XY$, $PY\wedge OE\colon(x,x)$, $PX\wedge OE\colon(y,y)$. Let $B=\block a\wedge OY$. Then $B\colon(0,b)$. By \eqref{eq:line-coordinates} we have $PY\colon[x]$. Therefore, $[x]\wedge[m,b]=(x,y)$, which implies that the flag is good:
        $$
            \begin{tikzpicture}[
                scale=1.2,
                point/.style={
                    draw,
                    circle,
                    color=black,
                    fill=black,
                    inner sep=1.2pt},
                    every node/.style={font=\footnotesize},
                ]
                \pgfmathsetmacro{\u}{1.7};
                
                % Points
                \coordinate (xstart) at (0.0,0.0);
                \coordinate (xend) at (2*\u,0.0);
                \coordinate (ystart) at (0.0,0.0);
                \coordinate (yend) at (0.0,2*\u);
                \coordinate (E) at (\u,\u*0.8);
                \coordinate (Q) at (\u*0.3,\u*0.0);
                
                % Axis
                \draw[name path=xaxis,
                    color=orange,
                    thick
                ] (xstart) -- (xend)
                    node[right,text=black] {$[0,0]$}
                    node[point,
                    pos=0.0,
                    label={[yshift=-5mm,xshift=-2mm]:
                        \textcolor{black}{$O$}}] (O) {}
                    node[point,
                        pos=0.5,
                        label={[text=black,xshift=-1mm,yshift=-6mm]:
                            $X$}
                    ] (X) {};
        
                \draw[name path=yaxis,
                    color=orange,
                    thick
                ] (ystart) -- (yend)
                    node[above,text=black] {$[0]$}
                    node[point,
                    pos=0.95,
                    label={[text=black,left,yshift=-1mm]:
                        $Y$}
                    ] (Y) {};
                \node[point,
                    label={[xshift=3mm,yshift=-3mm]:
                        $E$}
                ] at (E) {};
                \draw[name path=OE] (O) -- ($(O)!1.5!(E)$)
                    node[right] {$[1,0]$};
                \draw[name path=YQ] (Y) -- ($(Y)!1.1!(Q)$)
                    node[xshift=2mm,yshift=-2mm] {$[x]$};
                \draw[name path=XY] ($(X)!-0.1!(Y)$) -- (Y)
                    node[pos=0,xshift=2.7mm,yshift=-2mm] {$[\infty]$}
                    node[pos=0.48,
                        label={[xshift=4mm,yshift=-3mm]:
                            $(m)$}
                    ] (M) {};
                \path[name intersections={of=OE and XY, by=zz}];
                \draw[name path=YE] (Y) -- ($(Y)!1.2!(E)$)
                    node[right] {$[1]$};
                \coordinate (L) at (0,\u*1.2);
                \draw[name path=blocka] (L) -- ($(L)!2.1!(M)$)
                    node[
                        label={[xshift=4mm,yshift=-6mm]:$[m,b]$}
                    ] {};
                \node[point,
                    fill=green,
                    label={[left]: $(0,b)$}
                ] at (L) {};
                \node[point,
                    fill=lightblue
                ] at (M) {};
                \path[name intersections={of=YQ and blocka,by=P}];
                \node[point,
                    fill=orange,
                    label={[xshift=2mm,yshift=-1.5mm]:$P$}
                ] at (P) {};
                \draw[name path=XP] (X) -- (P);
                \path[name intersections={of=XP and OE, by=yy}];
                \node[point,
                    label={[xshift=-4.3mm,yshift=-3.1mm]:$(y,y)$}
                ] at (yy) {};
            \end{tikzpicture}
        $$
    \end{enumerate}
\end{proof}

\begin{defn}
    The ternary prerings $(\ter,T)$ and $(\ter',T')$ are isomorphic, if there is a map $\theta\colon\ter\to\ter'$ for which $\theta(T(x,m,b))=T'(\theta(x),\theta(m),\theta(b))$ holds for every $x,m,b\in\ter$.
\end{defn}

\begin{lem}\label{lem:left-solution-of-sum}
    Let\/ $(\ter,T)$ be a ternary prering. Given\/ $m,b\in\ter$, with\/ $m\ne0$, the map
    \begin{align*}
        \ter&\to\ter\\
        x&\mapsto T(x,m,b)
    \end{align*}
    is a bijection.
\end{lem}

\begin{proof}
    Since $\ter$ is a finite set, it suffices to show that the map is injective. Suppose that $T(x,m,b)=T(x',m,b)$ for some $x\ne x'$, and let $y$ denote the common value. By \ref{TR1} \textsc i),
    \begin{align*}
        T(x,0,y) &= y, &T(x',0,y) &= y,\\
        T(x,m,b) &= y, &T(x',m,b) &= y.
    \end{align*}
    By \ref{TR2}, we must have $(m,b)=(0,y)$, which is impossible because $m\ne0$.
\end{proof}

\begin{lem}\label{lem:right-solution-of-product}
    Let\/ $(\ter,T)$ be a ternary prering. Given $a,b\in\ter$, with $a\ne0$, the map
    \begin{align*}
        \ter&\to\ter\\
        x&\mapsto T(a,x,0)
    \end{align*}
    is a bijection.
\end{lem}

\begin{proof}
    It suffices to prove injectivity. Suppose that $T(a,x,0)=T(a,x',0)$ for some $x'\ne x$. Then, both $m=x$ and $m=x'$ satisfy the equations
    \begin{align*}
        T(a,m,0)&=b &T(0,m,0)&=0.
    \end{align*}
    However, since $a\ne0$, according to \ref{TR2}, there should be a unique pair $(m,0)$ satisfying these equations.
\end{proof}

\begin{lem}\label{lem:ternary-isomorphisms-preserve-units}
    If\/ $\theta\colon(\ter,T)\to(\ter',T')$ is an isomorphism of ternary prerings, then\/ $\theta(0)=0'$. If the ternary prerings are ternary rings, then\/ $\theta(1)=1'$.
\end{lem}

\begin{proof}
    Given a pair $(m,b)$, we have
    \begin{align*}
        T'(\theta(0),\theta(m),\theta(b)) &= \theta(T(0,m,b))\\
            &=\theta(b) 
                &&\text{; \ref{TR1} \textsc i)}\\
            &= T'(0',\theta(m),\theta(b)).
    \end{align*}
    Hence, by the Lemma \ref{lem:left-solution-of-sum}, $\theta(0)=0'$, as wanted. On the other hand,
    \begin{align*}
        T'(1',\theta(1),0') &= \theta(1)
                &&\text{; \ref{TR1} \textsc{ii)} non-relaxed}\\
            &= \theta(T(1,1,0))
                &&\text{; \ref{TR1} \textsc{ii)} relaxed}\\
            &= T'(\theta(1),\theta(1),0')
                &&;\ \theta(0)=0'.
    \end{align*}
    Since $\theta(1)\ne\theta(0)=0'$, we can use Lemma \ref{lem:left-solution-of-sum} to conclude that $\theta(1)=1'$.
\end{proof}

\begin{prop}\label{prop:coorinatized-isomorphism}
    Let\/ $\theta\colon (\ter,T)\to(\ter',T')$ be an isomorphism of ternary prerings. Then\/ $\theta$ induces a collineation between the associated projective planes.\footnote{See {\upshape Theorem~\ref{thm:projective-plane-of-ternary-ring}} for the construction of a projective plane from a ternary prering.} Moreover, in the case of ternary rings, this collineation maps the base quad\/ $((0,0),(0),(\infty),(1,1))$ of\/ $\Pi$ onto the base quad\/ $((0',0'),(0'),(\infty'),(1',1'))$ of\/~$\Pi'$.
\end{prop}


\begin{proof}
   Let\/ $\Pi=\igeo$ and\/ $\Pi'=(\pts',\blocks',\incidence')$ be the projective planes associated with the ternary rings. Define
    \begin{align*}
        \begin{aligned}
            \theta_{\pts}\colon\pts&\to\pts'\\
            (\infty)&\mapsto(\infty')\\
            (x)&\mapsto(\theta(x))\\
            (x,y)&\mapsto(\theta(x),\theta(y))
        \end{aligned}
        &&
        \begin{aligned}
            \theta_{\blocks}\colon\blocks&\to\blocks'\\
            [\infty]&\mapsto[\infty']\\
            [x]&\mapsto[\theta(x)]\\
            [m,b]&\mapsto[\theta(m),\theta(b)]
        \end{aligned}
    \end{align*}
    Both\/ $\theta_{\pts}$ and\/ $\theta_{\blocks}$ are bijections, since\/ $\theta$ is a bijection. By table\/ \eqref{tbl:incidence}, the pair\/ $(\theta_{\pts},\theta_{\blocks})$ preserves incidences, and therefore defines a collineation. The correspondence of base quads is a direct consequence of Lemma~\ref{lem:ternary-isomorphisms-preserve-units}.
    
\end{proof}


\begin{rem}
    The correspondence
    \begin{align*}
        (\ter,T)\mapsto\Pi_T,\qquad 
        \theta\mapsto(\theta_{\pts},\theta_{\blocks})
    \end{align*}
    is functorial, that is, it preserves both identities and compositions.
\end{rem}

\begin{thm}\label{thm:coordinatization-consistency}
    Let\/ $(\ter,T)$ and\/ $(\ter',T')$ be two ternary rings coordinatizing the projective plane\/ $\Pi$, with respective base points\/ $O,X,Y,E$ and\/ $O',X',Y',E'$. Then $(\ter,T)$ and\/ $(\ter',T')$ are isomorphic if, and only if, there exists a collineation of\/ $\Pi$ mapping the quad\/ $(O,X,Y,E)$ onto\/ $(O',X',Y',E')$.
\end{thm}

\begin{proof}
    Let $\Pi=\igeo$. To prove the \textit{only if\/} part, suppose that\/ $\theta\colon\ter\to\ter'$ is an isomorphism of ternary rings. With the notation of Lemma~\ref{lem:isomorphic-coordinatized-projective-plane} and Proposition~\ref{prop:coorinatized-isomorphism}, we obtain the diagram
    \[
        \begin{tikzcd}
            \Pi
                \arrow[d,"{(\sigma,\gamma)}"']
                \arrow[r,"{(\phi_{\pts},\phi_{\blocks})}",dashed]
            & \Pi
                \arrow[d,"{(\sigma',\gamma')}"]\\
            {\Pi_T}
                \arrow[r,"{(\theta_{\pts},\theta_{\blocks})}"']
            & {\Pi_{T'}}
        \end{tikzcd}
    \]
    where the top horizontal collineation ensures commutativity. The conclusion of this part follows directly from the cited lemma and proposition.

    Conversely. If a collineation $(\phi_{\pts},\phi_{\blocks})$ is given that maps $(O,X,Y,E)$ onto $(O',X',Y',E')$, to complete the proof we have to show that there exists an isomorphism $\theta\colon(\ter,T)\to(\ter',T')$ such that
    \begin{equation}\label{eq:theta-equation}
        (\sigma',\gamma')
            \circ(\phi_{\pts},\phi_{\blocks})
            \circ(\sigma,\gamma)^{-1}=(\theta_{\pts},\theta_{\blocks}).
    \end{equation}
    Let $(\varphi,\psi)$ be the collineation on the \lhs\ of~\eqref{eq:theta-equation}. By Lemma~\ref{lem:isomorphic-coordinatized-projective-plane}, we have
    \[
        \varphi(0,0)=(0',0'),\quad\varphi(0)=(0'),
        \quad\varphi(1,1)=(1',1'),\quad\varphi(\infty)=(\infty').
    \]
    Furthermore, since $Z=XY\wedge OE$ and $Z'=X'Y'\wedge O'E'$, we get $\varphi(1)=(1')$. Therefore, using the equality $[m,0]=(m)(0,0)$ for $m=0,1$ we obtain
    \[
        \psi[0,0]=[0',0']\quad\text{and}\quad
        \quad\psi[1,0]=[1',0'].
    \]
    Additionally, from $OY\colon[0]$, $XY\colon[\infty]$, $YE\colon[1]$, $OX\wedge YE\colon(1,0)$ we respectively deduce
    \begin{equation}\label{eq:OE-and-YE}
        \psi[0]=[0'],\quad\psi[\infty]=[\infty'],
            \quad\psi[1,0]=[1'],
            \quad\varphi(1,0)=(1',0').
    \end{equation}
    Consider the bijection
    \begin{align*}
        \theta\colon(\ter,T)&\to(\ter',T')\\
        x&\mapsto x',
    \end{align*}
    where $(x')=\varphi((x))$. In particular $\theta(0)=0'$ and $\theta(1)=1'$. To see that $\theta$ is an isomorphism of ternary rings we have to show that
    \begin{equation}\label{eq:to-be-proven}
        (x,y)\incidence{[m,b]}
            \implies
            (\theta(x),\theta(y))
                \incidence{[\theta(m),\theta(b)]},
    \end{equation}
    where, for the sake of simplicity, we have used $\incidence$ instead of $\incidence_T$. By definition, $(\theta(m))=\varphi((m))$. Thus, from \eqref{eq:OE-and-YE}, we deduce
    \begin{align*}
        \varphi((1,m)) &= \varphi((0,0))\varphi((m))\wedge[1']\\
            &= (0',0')(\theta(m))\wedge[1']\\
            &= (1',\theta(m)).
    \end{align*}
    Since $(c,c)\incidence{[1,0]}$, we have $\varphi((c,c))=(c',c')$, for some $c'\in\ter'$. In addition, from $(1,c)=[1]\wedge(0)(c,c)$, we deduce
    \begin{align*}
        (1',\theta(c)) &= \varphi((1,c))\\
            &=[1']\wedge(0')(c',c')\\
            &= (1',c'),
    \end{align*}
    which implies $c'=\theta(c)$. Hence, $\varphi((c,c))=(\theta(c),\theta(c))$. This has two consequences. First, $\varphi(x,y)=(\theta(x),\theta(y))$. Indeed,\/ $x$ is determined by the relation\/ $(x,y)(\infty)\wedge[1,0]=(x,x)$, and\/ $y$ by\/ $(x,y)(0)\wedge[1,0]=(y,y)$. 

    Second, using that\/ $[m,b]=(m)(0,b)$, we deduce
    \begin{align*}
        \psi[m,b] 
            &= \varphi((m))\varphi((0,b))\\
            &= (\theta(m))(0',\theta(b))\\
            &= [\theta(m),\theta(b)].
    \end{align*}
    Hence, \eqref{eq:to-be-proven} follows directly from
    \[
        (x,y)\incidence{[m,b]}\implies
            \varphi(x,y)\incidence\psi[m,b].
    \]
\end{proof}

\begin{defn}
    In the ternary ring\/ $(\ter,T)$ the \textsl{sum} of two elements $a,b\in\ter$ is defined by
    \[
        a\+b = T(a,1,b).
    \]
    Equivalently, $a\+b$ is the unique element of $\ter$ satisfying $(a,a\+b)\incidence{[1,b]}$.
    $$
        \begin{minipage}[c]{0.45\textwidth}
        \begin{tikzpicture}[
            baseline=(current bounding box.north),
            scale=1.0,
            font=\small,
            point/.style={
                draw,
                circle,
                color=black,
                fill=green,
                inner sep=1.2pt},
                every node/.style={font=\footnotesize},
            ]
            \pgfmathsetmacro{\u}{1.7};
            
            % Points
            \coordinate (xstart) at (0.0,0.0);
            \coordinate (xend) at (2*\u,0.0);
            \coordinate (ystart) at (0.0,0.0);
            \coordinate (yend) at (0.0,2*\u);
            \coordinate (E) at (\u*1.2,\u*1.0);
            \coordinate (0b) at (0,\u*0.9);
            \coordinate (a0) at (\u*0.6,0);
            \coordinate (O) at (0.0,0.0);
            
            % Axes
            \draw[name path=xaxis,
                color=orange,
                thick
            ] (xstart) -- (xend)
                node[right,text=black] {$[0,0]$}
                node[point,
                    fill=black,
                    pos=0.8,
                    label={[text=black,xshift=0mm,yshift=-7mm]:
                        $X$}
                ] (X) {};
            \draw[name path=yaxis,
                color=orange,
                thick
            ] (ystart) -- (yend)
                node[above,text=black] {$[0]$}
                node[point,
                pos=0.95,
                fill=black,
                label={[text=black,left,yshift=-1mm]:
                    $Y$}
                ] (Y) {};
            \draw[name path=aY] (Y) -- (a0);
            \draw[name path=OE] (O) -- ($(O)!1.4!(E)$)
                node[right] {$[1,0]$};
            \path[name path=XY] (X) -- (Y);
            \path[name intersections={of=XY and OE,by=Z}];
            \draw[name path=b1,red] (0b) -- ($(0b)!1.6!(Z)$)
                node[right,text=black] {$[1,b]$};
            \node[point,
                fill=white,
                label={[xshift=0mm,yshift=-5mm]:
                    $Z$}
            ] at (Z) {};
            \draw[name path=Xb] (0b) -- (X);
  
            \path[name intersections={of=aY and b1,
                by=Pab}];
            \path[name intersections={of=aY and OE,
                by=aa}];
            \path[name intersections={of=Xb and OE,
                by=bb}];
            \node[point,
                fill=red,
                label={[text=black,
                    xshift=6mm,yshift=-1mm]:$(a,a\+b)$}
            ] at (Pab) {};
            \node[point,
                label={[xshift=0mm,yshift=-7mm]:$(a,0)$}
            ] at (a0) {};
            \node[point,
                label={[xshift=1mm,yshift=-7mm]:$(b,b)$}
            ] at (bb) {};
            \node[point,
                label={[left]:$(0,b)$}
            ] at (0b) {};
            \node[point,
                fill=black,
                label={[yshift=-6mm,xshift=-2mm,text=black]:
                    $O$}
            ] at (O) {};
            \node[point,
                fill=black,
                label={[yshift=-3.5mm,xshift=2mm,text=black]:
                    $E$}
            ] at (E) {};
            \node[point,
                label={[xshift=-4.5mm,yshift=-3mm,text=black]:
                    $(a,a)$}
            ] at (aa) {};
        \end{tikzpicture}
        \hfill
        \end{minipage}
        \begin{minipage}[c]{0.5\textwidth}
        \small\alg
            \begin{enumerate}[itemsep=1.8pt, parsep=0pt]
                \item Locate $(a,a)$ and $(b,b)$ on $OE$
                \item Draw the line $[a]=(a,a)Y$
                \item Draw the line $\block b=X(b,b)$
                \item Locate $(0,b)=OY\wedge\block b$
                \item Draw the line $[1,b]=(0,b)Z$
                \item Get $(a,a\+b)=[a]\wedge[1,b]$
            \end{enumerate}
    \end{minipage}
    $$
    The \textsl{multiplication} is defined by
    \[
        a\cdot m = T(a,m,0).
    \]
    Thus, $a\cdot m$ is the unique element of $\ter$ such that $(a,a\cdot m)\incidence{[m,0]}$. As usual, $a\cdot m$ will often be written as\/ $am$.
    $$
        \begin{minipage}[c]{0.45\textwidth}
        \begin{tikzpicture}[
            baseline=(current bounding box.north),
            scale=1.0,
            font=\small,
            point/.style={
                draw,
                circle,
                color=black,
                fill=green,
                inner sep=1.2pt},
                every node/.style={font=\footnotesize},
            ]
            \pgfmathsetmacro{\u}{1.7};
            
            % Points
            \coordinate (xstart) at (0.0,0.0);
            \coordinate (xend) at (2*\u,0.0);
            \coordinate (ystart) at (0.0,0.0);
            \coordinate (yend) at (0.0,2*\u);
            \coordinate (E) at (\u*1.65,\u*1.3);
            \coordinate (a0) at (\u*1.3,0);
            \coordinate (O) at (0.0,0.0);
            
            % Axes
            \draw[name path=xaxis,
                color=orange,
                thick
            ] (xstart) -- (xend)
                node[right,text=black] {$[0,0]$}
                node[point,
                    fill=black,
                    pos=0.9,
                    label={[text=black,xshift=0mm,yshift=-6mm]:
                        $X$}
                ] (X) {};
            \draw[name path=yaxis,
                color=orange,
                thick
            ] (ystart) -- (yend)
                node[above,text=black] {$[0]$}
                node[point,
                pos=0.95,
                fill=black,
                label={[text=black,left,yshift=-1mm]:
                    $Y$}
                ] (Y) {};
            \draw[name path=aY] (Y) -- (a0);
            \draw[name path=OE] (O) -- ($(O)!1.2!(E)$)
                node[right] {$[1,0]$};
            \draw[name path=XY] (X) -- (Y);
            \draw[name path=YE] (Y) -- (E)
                node[pos=0.7] (1m) {};
            \draw[name path=X1m] (X) -- ($(X)!1.01!(1m)$);
            \draw[name path=O1m,
                red,
                text=black] (O) -- ($(O)!1.2!(1m)$)
                node[above] {$[m,0]$};
            \path[name intersections={of=O1m and XY,by=m}];
            \path[name intersections={of=X1m and OE,by=mm}];
            \draw[name intersections={of=XY and OE,by=Z}];
            \node[point,
                fill=white,
            ] at (Z) {};
  
            \path[name intersections={of=aY and OE,
                by=aa}];
            \path[name intersections={of=aY and O1m,by=am}];
            \node[point,
                label={[xshift=0mm,yshift=-7mm]:$(a,0)$}
            ] at (a0) {};
            \node[point,
                label={[xshift=6mm,yshift=-3.7mm]:$(m,m)$}
            ] at (mm) {};
            \node[point,
                fill=black,
                label={[yshift=-6mm,xshift=-2mm,text=black]:
                    $O$}
            ] at (O) {};
            \node[point,
                fill=black,
                label={[yshift=-3.5mm,xshift=7mm]:
                    $E\colon(1,1)$}
            ] at (E) {};
            \node[point,
                label={[xshift=-0.9mm,yshift=-8mm,text=black]:
                    $(a,a)$}
            ] at (aa) {};
            \node[point,
                label={[xshift=3.5mm,yshift=-3.2mm,text=black]:
                    $(m)$}
            ] at (m) {};
            \node[point,
                label={[xshift=5.5mm,yshift=-2.5mm,text=black]:
                    $(1,m)$}
            ] at (1m) {};
            \node[point,
                fill=red,
                label={[xshift=-5.7mm,yshift=-3.2mm,text=black]:
                    $(a,am)$}
            ] at (am) {};
        \end{tikzpicture}
        \hfill
        \end{minipage}
        \begin{minipage}[c]{0.5\textwidth}
        \small\alg
            \begin{enumerate}[itemsep=1.8pt, parsep=0pt]
                \item Locate $(a,a)$ and $(m,m)$ on $OE$
                \item Draw the line $[a]=(a,a)Y$
                \item Draw the line $\block b=X(m,m)$
                \item Locate $(1,m)=YE\wedge\block b$
                \item Locate $(m)=O(1,m)\wedge XY$
                \item Draw the line $[m,0]=O(m)$
                \item Get $(a,am)=[a]\wedge[m,0]$
            \end{enumerate}
    \end{minipage}
    $$
\end{defn}

\begin{rem}
    Given $m\in\ter\setminus\set0$, the following picture illustrates how to find $m'$ such that $m\cdot m'=m'\cdot m=1$
    $$
        \begin{tikzpicture}[
            scale=1.2,
            point/.style={
                draw,
                circle,
                color=black,
                fill=black,
                inner sep=1.2pt},
                every node/.style={font=\footnotesize},
            ]
            \pgfmathsetmacro{\u}{1.7};
            
            % Points
            \coordinate (xstart) at (0.0,0.0);
            \coordinate (xend) at (2*\u,0.0);
            \coordinate (ystart) at (0.0,0.0);
            \coordinate (yend) at (0.0,2*\u);
            \coordinate (E) at (\u,\u*1.0);
            
            % Axes
            \draw[name path=xaxis,
                color=orange,
                thick
            ] (xstart) -- (xend)
                node[right,text=black] {$[0,0]$}
                node[point,
                pos=0.0,
                label={[yshift=-5mm,xshift=-2mm,text=black]:
                    $O$}] (O) {}
                node[point,
                    pos=0.43,
                    label={[text=black,xshift=-1mm,yshift=-6mm]:
                        $X$}
                ] (X) {};
    
            \draw[name path=yaxis,
                color=orange,
                thick
            ] (ystart) -- (yend)
                node[above,text=black] {$[0]$}
                node[point,
                pos=0.95,
                label={[text=black,left,yshift=-1mm]:
                    $Y$}
                ] (Y) {};
            \draw[name path=OE] (O) -- ($(O)!1.7!(E)$)
                node[right] {$[1,0]$};
            \draw[name path=XY] ($(X)!-0.1!(Y)$) -- (Y)
                node[pos=0,xshift=2.7mm,yshift=-2mm] {$[\infty]$}
                node[pos=0.46,
                    label={[left,yshift=-1.5mm]:
                        $(m)$}
                ] (M) {};
            
            % Lines
            \draw[name path=YE] (Y) -- ($(Y)!1.5!(E)$)
                node[right] {$[1]$};
            \path[name path=XE] (X) -- ($(X)!1.7!(E)$);
            
            % Intersections
            \path[name intersections={of=OE and XY, by=Z}];
            \draw[name path=OM] (O) -- ($(O)!2.5!(M)$)
                node[xshift=2mm,yshift=2mm] {$[m,0]$};
            \node[point,
                fill=white,
                label={[xshift=2.5mm,yshift=-2.5mm]:
                    $Z$}
            ] at (Z) {};
            \path[name intersections={of=XE and OM,by=invOne}];
            \draw (X) -- (invOne);
            \path[name path=Yinv] (Y) -- ($(Y)!1.4!(invOne)$);
            \path[name intersections={of=OE and Yinv,by=invInv}];
            \draw (Y) -- (invInv);
            \draw[name path=XinvInv] (X) -- (invInv);
            \path[name intersections={of=YE and XinvInv,by=1Inv}];
            \draw[name path=OM'] (O) -- (1Inv);
            \path[name intersections={of=OM' and XY,by=M'}];
            
            % Points
            \node[point,
                fill=green,
                label={[xshift=-1.4mm,yshift=-7.7mm,text=black]:
                    $(m')$}
            ] at (M') {};
            \node[point,
                fill=green,
                label={[xshift=6mm,yshift=-3.0mm,text=black]:
                    $(1,m')$}
            ] at (1Inv) {};
            \node[point,
                fill=green,
                label={[xshift=7mm,yshift=-5.0mm,text=black]:
                    $(m',m')$}
            ] at (invInv) {};
            \node[point,
                fill=green,
                label={[xshift=-3.0mm,yshift=0.5mm,text=black]:
                    $(m',1)$}
            ] at (invOne) {};
            \node[point,
                label={[xshift=-2.7mm,yshift=-3.0mm]:
                    $E$}
            ] at (E) {};
            \path[name intersections={of=OM and YE,by=oneM}];
            \node[point,
                fill=green,
                label={[xshift=-5mm,yshift=-3.5mm]:$(1,m)$}
            ] at (oneM) {};
            \node[point,
                fill=lightblue
            ] at (M) {};
        \end{tikzpicture}
    $$
    {\small\alg
         \begin{enumerate}[itemsep=1.8pt, parsep=0pt]
            \item Locate $(m,m)$ on $OE$
            \item Draw $X(m,m)$
            \item Locate $(1,m)=X(m,m)\wedge YE$
            \item Locate $(m)=O(1,m)\wedge XY$
            \item Draw $[m,0]=O(m)$
            \item Locate $(m',1)=XE\wedge[m,0]$\qquad
                ; \textcolor{gray}{$m\ne0\implies XE\wedge[m,0]\ne X$}
            \item Draw $Y(m',1)$
            \item Locate $(m',m')=Y(m',1)\wedge OE$
            \item Draw $X(m',m')$
            \item Locate $(1,m')=X(m,m')\wedge YE$
            \item Draw $O(1,m')$
            \item Locate $(m')=O(1,m')\wedge XY$
         \end{enumerate}
    }
    Note that in the case\/ $m=0$, we would have\/ $XE\wedge[m,0]=X$. However, the algorithm can proceed in this case as well:
    {\small\alg
        \begin{enumerate}[itemsep=1.8pt, parsep=0pt]
        \setcounter{enumi}{9}
            \item Locate $XE\wedge[0,0]=X$
            \item Draw $YX$
            \item Locate $YX\wedge OE=Z$
            \item Draw $XZ$
            \item Locate $XZ\wedge YE=Y$
            \item Draw $OY$
            \item Locate $OY\wedge XY=Y$
        \end{enumerate}
    }
    \vspace{-0.7\parskip}
    finding $\infty$ as the multiplicative inverse of $0$.
\end{rem}

\begin{xmpl}\label{xmpl:Moulton-ternary-ring-defn}
    As a follow-up of Example~\ref{xmpl:Moulton-coordinatization}, the ternary ring $(\R,T_M)$ associated to the Moulton plane is given by
    \[
        T_M(x,m,b) =
            \begin{cases}
                mx+b        &m\ge0,\\[1mm]
                2mx+b     &m<0,\ b\ge0,\ x\le-\frac b{2m},\\[1mm]
                mx+\frac12b   &m<0,\ b\ge0,\ x\ge-\frac b{2m},\\[1mm]
                2mx+2b    &m<0,\ b\le0,\ x\le-\frac bm,\\[1mm]
                mx+b      &m<0,\ b\le0,\ x\ge-\frac bm.
            \end{cases}
    \]
    Let $+_M$ and $\circ_M$ be the sum and multiplication associated with this ternary ring. Then
    \begin{align*}
        u+_Mv &= T_M(u,1,v)= u + v\\
        u\circ_Mv &= T_M(u,v,0)
        = \begin{cases}
            2uv     &\text{if }v,u\le0,\\
            uv      &\text{otherwise}.
        \end{cases}
    \end{align*}
    Note also that, in this case, $T(x,m,b)$ does not always equal $(x\circ_Mm)+_Mb$.
\end{xmpl}


\section{Linear Ternary Rings and Quasifields}

It is not generally true that the operations of sum and multiplication defined on a ternary ring $(\ter,T)$ must satisfy the equality $x\cdot m\+b=T(x,m,b)$. In this section we study these kinds of relations between geometric and algebraic properties and their equivalences.

\begin{defn}
    A \textsl{magma} is a set equipped with an operation. A \textsl{quasigroup} is a magma $(Q,{}\cdot{})$, where, for any two elements $a,b\in Q$, the equations $a\cdot x=b$ and $x\cdot a=b$ have unique solutions. A \textsl{loop} is a quasigroup with an identity element. A \textsl{group} is an associative loop.
\end{defn}

\begin{lem}\label{lem:ternary-operations-define-loops}
    If\/ $(\ter, T)$ is a ternary ring and\/ $\ter^* = \ter \setminus \{0\}$, then\/ $(\ter, \+)$ and\/ $(\ter^*,\,\cdot\,)$ are loops with unit elements\/ $0$ and\/ $1$, respectively.
\end{lem}

\begin{proof}
    To verify that $(\ter^*,\,\cdot\,)$ is a magma, we have to show that $a\cdot m=0$ implies $a=0$ or $m=0$. But $a\cdot m=0$, means $(a,0)\incidence{[m,0]}=(m)(0,0)$. If $a=0$ we are done. Otherwise, $(m)\incidence(a,0)(0,0)$ by the \rr. Since $(a,0)(0,0)=[0,0]$, we deduce $(m)\incidence{[0,0]}\wedge[\infty]=(0)$, which implies that $m=0$.

    The equation $a\+x=b$ is equivalent to $T(a,1,x)=b$, which has a unique solution by \ref{TR3}.

    The equation $x\+a=b$ is equivalent to $T(x,1,a)=b$, which has a unique solution by Lemma~\ref{lem:left-solution-of-sum}.

    The equations $a\+0=a$ and $0\+a=a$ are equivalent to $T(a,1,0)=a$ and $T(0,1,a)=a$, which hold by \ref{TR1} \textsc i).

    The equation $a\cdot x=b$ is equivalent to $T(a,x,0)=b$, which has a unique solution when $a\ne0$ by Lemma~\ref{lem:right-solution-of-product}.

    The equation $x\cdot a=b$ is equivalent to $T(x,a,0)=b$, which has a unique solution when $a\ne0$ by Lemma~\ref{lem:left-solution-of-sum}.

    The equations $a\cdot1=a$ and $1\cdot a=a$ are equivalent to $T(a,1,0)=a$ and $T(1,a,0)=a$, which hold by \ref{TR1} \textsc{ii)}.
\end{proof}

\begin{defn}
    As introduced in Appendix~\nameref{ch:nearfields}, Definition~\ref{defn:quasifield}, a triple\/ $(Q, +,{}\cdot{})$, where\/ $Q$ is a set and\/ $+$ and\/ $\cdot$ are binary operations on\/ $Q$, is called a \textsl{right quasifield} if the following conditions hold:
    \begin{enumerate}[\roman*.,
        ref=\upshape(\scshape\roman*),
        font=\upshape\scshape]
        \item\label{qf-i} $(Q, +)$ is an group with identity\/ $0$;
        \item\label{qf-ii} $(Q \setminus \{0\}, {}\cdot{})$ is a loop with identity\/ $1\ne0$;
        \item\label{qf-iii} $(a+b) \cdot c = a \cdot c + b \cdot c$ for every\/ $a,b,c \in Q$ (right distributivity);
        \item\label{qf-iv} For every\/ $a, b, c \in Q$ with\/ $a \ne b$, there is a unique\/ $x \in Q$ satisfying the equation\/ $x \cdot a - x \cdot b = c$.
    \end{enumerate}
\end{defn}

\begin{rem}
    Even though the commutativity of the group $(Q,+)$ is not required in \ref{defn:quasifield}, here we will restrict to that case.
\end{rem}

\begin{prop}
    Let\/ $(Q, +, {}\cdot{})$ satisfy axioms\/ \ref{qf-i}, \ref{qf-ii}, and\/ \ref{qf-iii} of the definition of quasifield. Then, for every\/ $u, v \in Q$, we have
    \begin{enumerate}[a),font=\upshape]
        \item $0\cdot u=0$,
        \item $-u = (-1) \cdot u$,
        \item $u\cdot(-1)=-u$ and
        \item $u \cdot (-v) = (-u) \cdot v = -(u \cdot v)$
    \end{enumerate}
\end{prop}

\begin{proof}${}$
    \begin{enumerate}[a)]
        \item
        $0\cdot u+0\cdot u\stackrel{\text{\ref{qf-iii}}}=
                (0+0)\cdot u \stackrel{\text{\ref{qf-i}}}= 0\cdot u
        $.
        \item $u + (-1)\cdot u=1\cdot u+(-1)\cdot u=(1+(-1))\cdot u
            = 0\cdot u = 0$.
        \item Put $s=u+u\cdot(-1)$ and let's show that $s=0$. By part b)
        \[
            1=-(-1)=(-1)\cdot(-1).
        \]
        Then
        \begin{align*}
            s\cdot1 &= s\\
                &= u\cdot(-1)+u\cdot(-1)\cdot(-1)\\
                &= (u+u\cdot(-1))\cdot(-1)\\
                &= s\cdot(-1).
        \end{align*}
        If $s\ne0$, by \ref{qf-ii} we would have $1=-1$. Hence, by part~b) $-u=u$ for all $u\in Q$, and so c) is trivial. Otherwise, $s=0$, as wanted.
        \item By the associativity of the multiplication, we have
        \begin{align*}
            u\cdot(-v)+u\cdot v &= u\cdot(-1)\cdot v+u\cdot v
                    &&\text{; part b)}\\
                &= (u\cdot(-1)+u)\cdot v
                    &&\text{; axiom~\ref{qf-iii}}\\
                &= 0\cdot v
                    &&\text{; part c)}\\
                &= 0
                    &&\text{; part a)}
        \end{align*}
        Moreover, $(-u)\cdot v\stackrel{\text{c)}}=u\cdot(-1)\cdot v
        \stackrel{\text{b)}}= u\cdot(-v)$.
    \end{enumerate}
    
\end{proof}

\begin{prop}
    If\/ $Q$ is finite, property\/~\ref{qf-iv} is a consequence of\/~\ref{qf-i}, \ref{qf-ii}, and\/~\ref{qf-iii}.
\end{prop}

\begin{proof}
    Fix $a\ne b\in Q$ and consider the map
    \begin{align*}
        \delta\colon Q&\to Q\\
        x&\mapsto x\cdot a-x\cdot b.
    \end{align*}
    To prove the lemma it suffices to show that $\delta$ is injective. Suppose $\delta(x)=\delta(y)$. Then
    \[
        x\cdot a-y\cdot a=x\cdot b-y\cdot b.
    \]
    Then the lemma and \ref{qf-iii} imply
    \[
        (x-y)\cdot a=(x-y)\cdot b.
    \]
    If $x\ne y$, axiom~\ref{qf-ii} allows us to cancel the nonzero factor $x-y$ on both sides, yielding $a=b$, which contradicts our assumption that $a\ne b$. Hence $x=y$, and $\delta$ is injective, as claimed.
\end{proof}

\begin{defn}\label{defn:linear}
    The ternary ring $(\ter,T)$ is \textsl{linear} if $T(a,m,b)=a\cdot m\+b$ for every $a,m,b\in\ter$.
\end{defn}

\begin{rem}\label{rem:linear-ternary-ring}
    Equivalently, $(\ter,T)$ is linear when
    \[
        T(a,m,b)=T(a\cdot m,1,b)=T(T(a,m,0),1,b)
    \]
\end{rem}

\begin{rem}\label{rem:ternary-sum-group}
    The loop $(\ter,\+)$ is a group if, and only if,
    \[
        T(T(a,1,b),1,c) = T(a,1,T(b,1,c)).
    \]
    The commutativity of the sum is equivalent to
    \[
        T(a,1,b)=T(b,1,a).
    \]
\end{rem}

\begin{xmpl}
    Let\/ $(\kappa,+,{}\cdot{})$ be an ordered field, and let\/ $0 < \zeta \ne 1$ be a fixed element of\/ $\kappa$. We define a new multiplication on the elements of\/ $\kappa$ in the following way:
    \[
    a\circ_\zeta b =
    \begin{cases}
        a\zeta b & \text{if } a\le0 \text{ and } b\le 0,\\
        ab & \text{otherwise}.
    \end{cases}
    \]
    Let $T_\zeta(a,m,b)=a\circ_\zeta m+b$. According to Definition~\ref{defn:ternary-ring}, $(\kappa,T_\zeta)$ is a ternary ring:\footnote{The projective plane associated with $(\R,T_{\frac12})$ is a \textit{variant} of the Moulton plane in which the lines with \textit{negative slope} $m$ bend to $\frac12m$ in the half-plane $\{y>0\}$.}
    \begin{enumerate}[tr$_\arabic*$.,font=\scshape]
        \item Straightforward.
        
        \item Fix $x,x',y,y'\in\kappa$, with $x>x'$. Since these are constants, we can replace $b$ with $b-y'$ and assume that $y'=0$. Thus the equations become
        \[
            \left\{\begin{aligned}
                x\circ_\zeta m+b&=y\\
                x'\circ_\zeta m+b&=0,
            \end{aligned}
            \right.
        \]
        where the unknowns are $m$ and $b$. Let
        \[
            z = \frac y{x-x'}.
        \]
        Then,
        {\small
        \[
            \begin{array}{c|ccc}
                 m&y\ge0&y<0\\
                 \hline\rule{0pt}{10pt}
                 x'\ge0&z&z\\
                 x\ge0>x'&z&y/(x-\zeta x')\\
                 0>x&z&z/\zeta
            \end{array}
        \]}
        \item Consider the equation $x\circ_\zeta m+b=y$, where $x,y,m$ are given and $b$ is the unknown. Then $b=y-x\circ m$ is the unique solution.

        \item It suffices to show that, when $m>m'$, the equation
        \[
                x\circ_\zeta m=
                x\circ_\zeta m'+b,
        \]
        has unique solution $x$. Put $c=b/(m-m')$. Then,
        {\small\[
            \begin{array}{c|ccc}
                 x&b\ge0&b<0\\
                 \hline\rule{0pt}{10pt}
                 m'\ge0&c&c\\
                 m\ge0>m'&c&b/(m-\zeta m')\\
                 0>m&c&c/\zeta
            \end{array}
        \]}
    \end{enumerate}
\end{xmpl}

\begin{thm}\label{thm:(Y,XY)-transitive}
    Let\/ $\Pi$ be a projective plane with ternary ring\/ $(\ter,T)$ based on\/ $O,X,Y,E$. Then\/ $\Pi$ is\/ $(Y,XY)$-transitive if, and only if, $(\ter,T)$ is linear and\/ $(\ter,\+)$ is a group.
\end{thm}

\needspace{2\baselineskip}
\begin{proof}${}$
    \begin{description}
    \item[\rm\textit{if\/} part:] Take two distinct points $P$ and $P'$, not on $XY$ and collinear with $Y$. According to Definition~\ref{defn:(C,a)-transitive}, we have to show that there is a $(Y,XY)$-elation $\alpha$ satisfying $\alpha(P)=P'$. 
    
    We have $P\colon(a,b)$, $P'\colon(a,b')$, and $PP'\colon[a]$, with $b\ne b'$.
    $$
        \begin{tikzpicture}[
            scale=0.9,
            point/.style={
                draw,
                circle,
                color=black,
                fill=black,
                inner sep=1.2pt},
            every node/.style={font=\footnotesize},
            ]
            \pgfmathsetmacro{\s}{1.7};
            
            % Points
            \coordinate (xstart) at (0.0,0.0);
            \coordinate (xend) at (2.5*\s,0.0);
            \coordinate (ystart) at (0.0,0.0);
            \coordinate (yend) at (0.0,2*\s);
            \coordinate (E) at (\s*1.5,\s*1.0);
            \coordinate (A) at (\s*0.5,\s*0.0);
            \coordinate (Q) at (\s*1.2,\s*0.0);
            
            % Axis
            \draw[name path=xaxis,
                color=orange,
                thick
            ] (xstart) -- (xend)
                node[right,text=black] {$[0,0]$}
                node[point,
                pos=0.0,
                label={[yshift=-5mm,xshift=-2mm]:
                    \textcolor{black}{$O$}}] (O) {}
                node[point,
                    pos=0.92,
                    label={[text=black,xshift=0mm,yshift=-6mm]:
                        $X$}
                ] (X) {};
    
            \draw[name path=yaxis,
                color=orange,
                thick
            ] (ystart) -- (yend)
                %node[above,text=black] {$[0]$}
                node[point,
                pos=0.95,
                label={[text=black,left,yshift=-1mm]:
                    $Y$}
                ] (Y) {};
            \node[point,
                label={[xshift=2mm,yshift=-4mm]:
                    $E$}
            ] at (E) {};
            \draw[name path=OE] (O) -- ($(O)!1.2!(E)$)
                node[right] {$[1,0]$};
            \draw[name path=YA] (Y) -- ($(Y)!1.05!(A)$)
                node[xshift=2mm,yshift=-2mm] {$[a]$}
                node[point,
                    fill=orange,
                    pos=0.60,
                    label={[text=black,xshift=-2.5mm,yshift=-2.5mm]:
                        $P'$}
                ] (P') {}
                node[point,
                    fill=orange,
                    pos=0.40,
                    label={[text=black,xshift=-2.0mm,yshift=-2mm]:
                        $P$}
                ] (P) {};;

            \draw[name path=YQ] (Y) -- ($(Y)!1.05!(Q)$)
                node[xshift=2mm,yshift=-2mm] {$[x]$}
                node[pos=0.38] (Q) {};

            \draw[name path=XY] (X) -- (Y);
            \path[name path=YE] (Y) -- ($(Y)!1.2!(E)$);
            \draw[dashed,name path=PQ] (P) -- ($(P)!2.4!(Q)$);
            \path[name intersections={of=XY and PQ,by=M}];
            \node[point,
                fill=yellow,
                label={[xshift=2mm,yshift=-1mm,text=black]:
                    $M$}
            ] at (M) {};
            \draw[dashed,name path=MP'] (M) -- (P');
            \path[name intersections={of=MP' and YQ,by=Q'}];
            \node[point,
                fill=green,
                label={[xshift=3mm,yshift=-3.5mm,text=black]:
                    $Q'$}
            ] at (Q') {};
            \node[point,
                fill=green,
                label={[text=black,xshift=1.3mm,yshift=-1mm]:
                    $Q$}
            ] at (Q) {};
        \end{tikzpicture}
    $$
    Given a point $Q\colon(x,y)$ not lying on $PP'$, let $M = PQ \wedge XY$ and set $Q' = MP' \wedge QY$. Then $Q'$ has the form $Q'\colon(x,y')$ for some $y' \in \ter$. Hence, a $(Y,XY)$-elation must map $Q$ to $Q'$, with no alternative.

    Let $d=b'\dotminus b$, which is well-defined because $(\ter,\+)$ is a group. Put $M\colon(m)$. Then, $(a,b),(x,y)\incidence{[m,b]}$ and $(a,b'),(x,y')\incidence{[m,b\+d]}$. Since $(\ter,T)$ is linear, we deduce that $y'=y\+d$. Thus, we can set
    {\small\begin{align*}
        \alpha_{\pts}\colon\pts&\to\pts
        &\alpha_{\blocks}\colon\blocks&\to\blocks\\
        (x,y)&\mapsto(x,y\+d),
        &[m,h]&\mapsto[m,h\+d],\\
        (m)&\mapsto(m),
        &[m]&\mapsto[m],\\
        (\infty)&\mapsto(\infty)
        &[\infty]&\mapsto[\infty].
    \end{align*}}
    
    \vspace{-0.5\baselineskip}
    Clearly $\alpha(P)=P'$. Moreover, $\alpha_{\pts}$ and $\alpha_{\blocks}$ are bijections: since $(\ter,\+)$ is a group, associativity ensures that $y_1=y_2$ whenever $y_1\+d=y_2\+d$. To verify that $(\alpha_{\pts},\alpha_{\blocks})$ is a collineation observe that
    \begin{align*}
        (u,v)\incidence{[m,h]} &\iff v=T(u,m,h)=u\cdot m\+h
                &&\text{; $(\ter,T)$ linearity}\\
            &\iff v\+d=u\cdot m\+(h\+d)
                &&\text{; associativity of }\+\\
            &\iff(u,v\+d)\incidence{[m,h\+d]}
                &&\text{; $(\ter,T)$ linearity}.
    \end{align*}

    \item[\rm\textit{only if\/}:] Take $a,m,b\in\ter$. To prove that $T(a,m,b)=a\cdot m\+b$, we may assume that none of the trivial cases are included. These are $m=0,1$, $b=0$, or $a=0$.
    
    By Baer's Theorem~\ref{thm:baer}, since we are under the hypothesis that $\Pi$ is $(Y,XY)$-transitive, we know that it is $(Y,XY)$-Desarguesian.

    Consider the points $O\colon(0:0)$, $A\colon(a,0)$, $M=(m)$ and $B\colon(0,b)$. Then $MB\colon[m,b]$ and $AY\colon[a]$.

    Define $C_1=OM\wedge AY$ and $C_2=BM\wedge AY$. Since $OM\colon[m,0]$, we have $C_1\colon(a,a\cdot m)$. Moreover, $C_2=(a,y)$ for some $y\in\ter$.

    As $Z\colon(1)$ and $OZ\colon[1,0]$, we have $ZB\colon[1,b]$. Since $C_1\colon[a,a\cdot m]$, we obtain $D_1\colon(a\cdot m,a\cdot m)$. Thus, for $D_2=ZB\wedge YD_1$ we have $D_2\colon(a\cdot m,a\cdot m\+b)$.
    $$
        \begin{minipage}[c]{0.55\textwidth}
        \begin{tikzpicture}[
            baseline=(current bounding box.center),
            scale=1.0,
            point/.style={
                draw,
                circle,
                color=black,
                fill=black,
                inner sep=1.2pt},
            every node/.style={font=\footnotesize},
            ]
            \pgfmathsetmacro{\s}{1.7};
            
            % Points
            \coordinate (xstart) at (0.0,0.0);
            \coordinate (xend) at (2.5*\s,0.0);
            \coordinate (ystart) at (0.0,0.0);
            \coordinate (yend) at (0.0,2*\s);
            \coordinate (A) at (\s*0.6,\s*0.0);
            \coordinate (B) at (0.0,\s*0.9);
            \coordinate (E) at (\s*1.8,\s*0.7);
            
            % Axis
            \draw[name path=xaxis,
                color=orange,
                thick
            ] (xstart) -- (xend)
                node[point,
                pos=0.0,
                label={[yshift=-5mm,xshift=-2mm,text=black]:
                    $O$}] (O) {}
                node[point,
                    pos=0.95,
                    label={[text=black,xshift=0mm,yshift=-6mm]:
                        $X$}
                ] (X) {};
    
            \draw[name path=yaxis,
                color=orange,
                thick
            ] (ystart) -- (yend)
                node[point,
                pos=0.95,
                label={[text=black,left,yshift=-1mm]:
                    $Y$}
                ] (Y) {};
            \draw[name path=XY] (X) -- (Y)
                node[pos=0.65] (M) {};
            \draw[name path=OE] (O) -- (E);
            \path[name intersections={of=OE and XY,by=Z}];
            \draw[name path=MB] (B) -- ($(B)!1.0!(M)$);
            \draw[name path=MO] (O) -- ($(O)!1.0!(M)$);
            \draw[name path=YA] (Y) -- ($(Y)!1.08!(A)$)
                node[xshift=0mm,yshift=-2mm] {$[a]$};
            \path[name intersections={of=YA and MB,by=C2}];
                    \draw[name path=ZB] (Z) -- (B);
            \draw[name path=XC2] ($(X)!0.3!(C2)$) -- (C2);
            \draw[dashed] (X) -- ($(X)!0.3!(C2)$);
            \draw[name intersections={of=ZB and XC2,by=D2}];
            \path[name intersections={of=YA and MO,by=C1}];
            \draw[name path=YD2] (Y) -- ($(Y)!1.78!(D2)$)
                node[below] {$[a\cdot m]$};
            \path[name intersections={of= OE and YD2,by=D1}];
            \draw (X) -- ($(X)!1.1!(C1)$);

            \draw[thick] (B) -- (C2) -- (D2) -- (B);
            \draw[thick] (O) -- (C1) -- (D1) -- (O);
            \node[point,
                fill=green,
                label={[xshift=-1mm,yshift=-6mm,text=black]:
                    $D_1$}
            ] at (D1) {};
            \node[point,
                fill=green,
                label={[xshift=-7mm,yshift=-3mm,text=black]:
                    $B\colon(0,b)$}
            ] at (B) {};
            \node[point,
                fill=green,
                label={[xshift=1.5mm,yshift=-0.5mm,text=black]:
                    $D_2$}
            ] at (D2) {};
            \node[point,
                fill=green,
                label={[xshift=1.2mm,yshift=-0.3mm,text=black]:
                    $C_2$}
            ] at (C2) {};
            \node[point,
                fill=green,
                label={[xshift=3.5mm,yshift=-2.2mm,text=black]:
                    $C_1$}
            ] at (C1) {};
            \node[point,
                fill=white,
                label={[xshift=-0.5mm,yshift=-5mm,text=black]:
                    $Z$}
                ] at (Z) {};
            \node[point,
                fill=green,
                label={[xshift=4mm,yshift=-1mm,text=black]:
                    $M\colon(m)$}
            ] at (M) {};
            \node[point,
                label={[xshift=2mm,yshift=-1mm,text=black]:
                    $E$}
            ] at (E) {};
        \end{tikzpicture}
        \end{minipage}
        \hfill
        \begin{minipage}[c]{0.35\textwidth}
        {\small
        \begin{align*}
            O\phantom{_1}&\colon(0,0)\\
            C_1&\colon(a,a\cdot m)\\
            D_1&\colon(a\cdot m,a\cdot m)\\[-3.2mm]\\
            B\phantom{_1}&\colon(0,b)\\
            C_2&\colon(a,y)\\
            D_2&\colon(a\cdot m,a\cdot m\+b)\\\\
        \end{align*}
        }
        \end{minipage}
    $$
    This configuration contains two triangles, $OC_1D_1$ and $BC_2D_2$, whose corresponding vertices are collinear with $Y$. Moreover, the intersection points of the corresponding sides, namely $M=OC_1\wedge BC_2$ and $Z=OD_1\wedge BD_2$, lie on $XY$. Since $X=C_1D_1\wedge XY$, we also have $X=C_2D_2\wedge XY$. This means that the second coordinates of $C_2$ and $D_2$ coincide, i.e., 
    \[
        C_2\colon(a,a\cdot m\+b).
    \]
    Hence, $(a,a\cdot m\+b)\incidence{[m,b]}$, which proves that the ternary ring is linear.

    It remains to be shown that $(\ter,\+)$ is a group. By Lemma~\ref{lem:ternary-operations-define-loops}, this reduces to proving the associativity.

    Take $a,b,c\in\ter$. We will show that $(a\+b)\+c=a\+(b\+c)$. The transitivity hypothesis implies the existence of a $(Y,XY)$-elation $\alpha$ mapping $O\colon(0,0)$ to $B\colon(0,c)$.
    
    Given $x\in\ter$, define $A=(x,0)$ and $P\colon(x,y)$. Since $AY\in\Fix\alpha$ and $AY\colon[x]$, we deduce that $\alpha(P)\colon(x,y')$, for some $y'\in\ter$. Thus, the assignment $y\mapsto y'$ defines a bijection $\sigma\colon\ter\to\ter$ that satisfies $\sigma(0)=c$.

    Furthermore, for $M\colon(m)$ it is $\alpha(M)=M$. Consequently,
    \[
        \alpha[m,y]=\alpha(m)\alpha(0,y)=(m)(0,\sigma(y))=[m,\sigma(y)].
    \]
    In particular, for $z=x\+y=T(x,1,y)$, we have
    \[
        (x,z)\incidence{[1,y]}
            \iff (x,\sigma(z))\incidence{[1,\sigma(y)]},
    \]
    which translates into
    \[
        \sigma(x\+y)=x\+\sigma(y).
    \]
    Setting $x=b$, $y=0$ we find
    \[
        \sigma(b)=b\+\sigma(0)=b\+c.
    \]
    Hence, for $x=a$, $y=b$,
    \[
        \sigma(a\+b)=a\+\sigma(b)=a\+(b\+c),
    \]
    while for $x=a\+b$, $y=0$ we obtain
    \[
        \sigma(a\+b)=\sigma((a\+b)\+0)=(a\+b)\+c,
    \]
    which confirms associativity.

    \end{description}
\end{proof}

\begin{thm}\label{thm:(X,XY)-transitive}
    The projective plane\/ $\Pi$ is \textsl{$(X, XY)$-transitive} if, and only if, $(\ter,\+)$ is a group and for every\/ $a,b,c\in\ter$ we have\/ $T(a,b,c\cdot b) = (a\+c)\cdot b$.
\end{thm}

\begin{proof}
    Suppose that $\Pi$ is $(X,XY)$-transitivie. Fix $a,b,c\in\ter$. Let $A\colon(a,0)$, $B\colon(b,0)$, and $C\colon(0,c)$. Locate the points $Q'$, $Q$, $P'$, $P$, $R$, $R'$, $S$, and $S'$, as defined below
    $$
        \begin{minipage}[c]{0.58\textwidth}
        \begin{tikzpicture}[
            baseline=(current bounding box.center),
            scale=1.1,
            point/.style={
                draw,
                circle,
                color=black,
                fill=black,
                inner sep=1.2pt},
                every node/.style={font=\footnotesize},
            ]
            \pgfmathsetmacro{\s}{1.7};
            
            % Points
            \coordinate (xstart) at (0.0,0.0);
            \coordinate (xend) at (2.7*\s,0.0);
            \coordinate (ystart) at (0.0,0.0);
            \coordinate (yend) at (0.0,2.3*\s);
            \coordinate (Ax) at (\s*0.5,\s*0.0);
            \coordinate (Q) at (0.0,\s*0.65);
            \coordinate (C) at (0.0,\s*1.0);
            \coordinate (E) at (\s*2.2,\s*1.4);
            
            % Axes
            \draw[name path=xaxis,
                color=orange,
                thick
            ] (xstart) -- (xend)
                node[point,
                pos=0.0,
                label={[yshift=-5mm,xshift=-2mm,text=black]:
                    $O$}] (O) {}
                node[point,
                    pos=0.98,
                    label={[text=black,xshift=0mm,yshift=-6mm]:
                        $X$}
                ] (X) {};
    
            \draw[name path=yaxis,
                color=orange,
                thick
            ] (ystart) -- (yend)
                node[point,
                pos=0.98,
                label={[text=black,left,yshift=-1mm]:
                    $Y$}
                ] (Y) {};
            \draw[name path=XY] (X) -- (Y)
                node[pos=0.65] (M) {};
            \draw[name path=OE] (O) -- (E);
            \path[name intersections={of=OE and XY,by=Z}];

            %Lines
            \draw[name path=ZQ] (Z) -- (Q);
            \draw[name path=ZC] (Z) -- (C);
            \draw[name path=AxY] (Ax) -- (Y);

            %Intersections
            \draw[name path=QX] (Q) -- (X);
            \path[name intersections={of=OE and QX,by=Q'}];
            \path[name path=YQ'] (Y) -- ($(Y)!1.37!(Q')$);
            \path[name intersections={of=xaxis and YQ',by=B}];
            \draw[name path=BY] (Y) -- (B);
            \path[name intersections={of=BY and ZC,by=P'}];
            \path[name path=XP'] (X) -- ($(X)!1.5!(P')$);
            \path[name intersections={of=XP' and yaxis,by=P}];
            \draw[dotted] (X) -- (P);
            \path[name path=ZP] (Z) -- (P);
            \draw (P) -- ($(P)!0.45!(Z)$);
            \draw ($(P)!0.55!(Z)$) -- (Z);
            \path[name intersections={of=AxY and ZQ,by=R}];
            \draw[name path=RX] (R) -- (X);
            \path[name intersections={of=RX and OE,by=R'}];
            \path[name intersections={of=QX and YQ',by=Q'}];
            \path[name intersections={of=AxY and ZP,by=S}];
            \draw[name path=R'Y] (R') -- (Y);
            \path[name intersections={of= ZC and R'Y,by=S'}];
            \draw[name path=SS',dashed] (S) -- (X);
            
            %Points
            \node[point,
                fill=white,
                label={[xshift=-0.5mm,yshift=-5mm,text=black]:
                    $Z$}
                ] at (Z) {};
            \node[point,
                label={[xshift=2mm,yshift=-1mm,text=black]:
                    $E$}
            ] at (E) {};
            \node[point,
                fill=green,
                label={[xshift=-7mm,yshift=-3mm,text=black]:
                    $Q\colon(0,b)$}
            ] at (Q) {};
            \node[point,
                fill=green,
                label={[xshift=-7mm,yshift=-3mm,text=black]:
                    $C\colon(0,c)$}
            ] at (C) {};
            \node[point,
                fill=green,
                label={[xshift=-9mm,yshift=-2mm,text=black]:
                    $P\colon(0,b\+c)$}
            ] at (P) {};
            \node[point,
                fill=green,
                label={[xshift=-2mm,yshift=-5mm,text=black]:
                    $P'$}
            ] at (P') {};
            \node[point,
                fill=green,
                label={[xshift=-2mm,yshift=-6mm,text=black]:
                    $A\colon(a,0)$}
            ] at (Ax) {};
            \node[point,
                fill=green,
                label={[xshift=-1.4mm,yshift=-6.1mm,text=black]:
                    $Q'$}
            ] at (Q') {};
            \node[point,
                fill=green,
                label={[xshift=3mm,yshift=-6mm,text=black]:
                    $B\colon(b,0)$}
            ] at (B) {};
            \node[point,
                fill=green,
                label={[xshift=-2.5mm,yshift=-1.9mm,text=black]:
                    $R$}
            ] at (R) {};
            \node[point,
                fill=green,
                label={[xshift=4mm,yshift=-2.4mm,text=black]:
                    $R'$}
            ] at (R') {};
            \node[point,
                fill=green,
                label={[xshift=1mm,yshift=-0.7mm,text=black]:
                    $S$}
            ] at (S) {};
            \node[point,
                fill=green,
                label={[xshift=2mm,yshift=-1.4mm,text=black]:
                    $S'$}
            ] at (S') {};
        \end{tikzpicture}
        \end{minipage}
        \hfill
        \begin{minipage}[c]{0.42\textwidth}
        {\footnotesize
        \begin{align*}
            Q'&=OE\wedge BY\colon(b,b)\\
            Q\phantom'&=OY\wedge XQ'\colon(0,b)\\
            P'&=ZC\wedge BY\colon(b,b\+c)\\
            P\phantom'&=OY\wedge XP'\colon(0,b\+c)\\
            R\phantom'&=ZQ\wedge AY\colon(a,a\+b)\\
            R'&=OE\wedge XR\colon(a\+b,a\+b)\\
            S\phantom'&=ZP\wedge AY\colon(a,a\+(b\+c))\\
            S'&=ZC\wedge YR'\colon(a\+b,(a\+b)\+c)\\
        \end{align*}
        }
        \end{minipage}
    $$
    Let $\alpha$ be an elation with center $X$ and axis $XY$ satisfying $\alpha(Q)=Q'$. Then,
    \begin{align*}
        \alpha(P) &= \alpha(QY)\wedge PX = Q'Y\wedge PX = P',\\
        \alpha(R) &= \alpha(QZ)\wedge RX = Q'Z\wedge RX = R',\\
        \alpha(S) &= \alpha(RY)\wedge SX = R'Y\wedge SX = S'.
    \end{align*}
    In particular, $S,S',X$ are collinear, this is $a\+(b\+c)=(a\+b)\+c$. Thus, $(\ter,\+)$ is associative, or equivalently, a group.

    To verify the equality $T(a,b,c\cdot b)=(a\+c)\cdot b$, take an elation $\beta$ with center $X$ and axis $XY$ satisfying $\beta(O)=A$. Since $\beta$ fixes every line passing through $X$, it fixes the second coordinate of every point, that is, given $x,y\in\ter$, we have $\beta(x,y)=(x',y)$ for some $x'\in\ter$. Thus, the mapping $x\mapsto x'$ defines a permutation $\sigma\in\Sym(\ter)$ that satisfies
    \[
        \beta(x,y)=(\sigma(x),y),
    \]
    with $\sigma(0)=a$. In particular, $\beta(0,y)=(a,y)$. Therefore, given a line $[m,h]$, the equation $[m,h]=(m)(0,h)$ implies
    \[
        \beta([m,h])=(m)(a,h)=[m,k_{m,h}],
    \]
    where $k_{m,h}$ depends on $m$ and $h$ and satisfies $(0,k_{m,h})=[0]\wedge(m)(a,h)$. In addition,
    \[
        (x,y)\incidence{[m,h]}\iff
            (\sigma(x),y)\incidence{[m,k_{m,h}]}.\tag{\dag}
    \]
    Substituting $x=0$, from \ref{TR1} we obtain
    \[
        h=T(a,m,k_{m,h}).\tag{\ddag}
    \]
    From (\dag) and (\ddag), for $m=1$ we get $x\+h=\sigma(x)\+k_{1,h}$ and $k_{1,h}=\!\dotminus a\+h$. Hence,
    \[
        \sigma(x)=x\+a.
    \]
    From (\ddag) and \ref{TR3} we deduce $k_{m,a\cdot m}=0$.  Thus, evaluating ($\dag$) at $h=a\cdot m$, we arrive at
    \[
        T(x,m,a\cdot m) = (x\+a)\cdot m.
    \]
    The conclusion follows by replacing $a$ with $b$, $x$ with $a$, and $m$ with $c$.

    For the \textit{if\/} part assume \textsc{h$_1$}:~$(\ter,\+)$ is a group, and \textsc{h$_2$}:~$T(a,b,c\cdot b)=(a\+c)\cdot b$ for all $a,b,c\in\ter$. Fix $a$ and define the maps
    \begin{align*}
        \varphi\colon\pts&\to\pts
            &\psi\colon\blocks&\to\blocks\\
        (x,y)&\mapsto(x\+a,y)
            &[m,h]&\mapsto[m,k_{m,h}]\\
        (m)&\mapsto(m)
            &[k]&\mapsto[k\+a]\\
        (\infty)&\mapsto(\infty)
            &[\infty]&\mapsto[\infty]
    \end{align*}
    where $k_{m,h}$ is defined by the equation
    \[
        h=T(a,m,k_{m,h}).
    \]
    By \ref{TR1}, $h=T(a,0,k_{0,h})=k_{0,h}$, which shows that $\psi$ fixes every line through $(0)$. Since $\varphi$ fixes every point $(m)$, we deduce that $(\varphi,\psi)$ defines an elation with center $(0)$ and axis $[\infty]$.

    It remains to be shown that
    \[
        (x,y)\incidence{[m,h]}\iff(x\+a,y)\incidence{[m,k_{m,h}]}.
    \]
    Since $(\ter^*,{}\cdot{})$ is a loop, there is a unique $\hat k$ such that $\hat k\cdot m=k_{m,h}$. Then,
    \begin{align*}
        T(x\+a,m,k_{m,h}) &= T(x\+a,m,\hat k\cdot m)\\
            &= (x\+a\+\hat k)\cdot m
                &&;\ \textsc h_1\\
            &= T(x,m,(a\+\hat k)\cdot m)
                &&;\ \textsc h_2\\
            &= T(x,m,T(a,m,\hat k\cdot m))
                &&;\ \textsc h_2\\
            &= T(x,m,T(a,m,k_{m,h}))\\
            &= T(x,m,h),
    \end{align*}
    as desired.
    %
    
\end{proof}

\begin{cor}
    The projective plane\/ $\Pi$ is\/ $(X,XY)$-transitive and\/ $(Y,XY)$-transitive if, and only if, the ternary ring\/ $(\ter,T)$ defines a quasifield\/ $(\ter,\+,{}\cdot{})$ that satisfy\/ $T(x,m,k)=x\cdot m\+k$. More explicitly, the points of the affine plane\/ $\Pi\setminus XY$ correspond to the elements of\/ $\ter\times\ter$, while the lines not passing through\/ $Y$ are precisely the sets
    \[
        \{(x,\,x\cdot m+k)\mid x\in\ter\},
    \]
    where\/ $m,k\in\ter$.
\end{cor}

\begin{proof}
    According to Theorems~\ref{thm:(X,XY)-transitive} and~\ref{thm:(Y,XY)-transitive}, it suffices to show, when $\Pi$ is $(X,XY)$- and $(Y,XY)$-transitive, the group $(\ter,\+)$ is abelian. Fix $a,b\in\ter$. As we saw in the proof of Theorem~\ref{thm:(Y,XY)-transitive}, there exists a $(Y,XY)$-elation $\alpha$ that maps $(0,0)$ to $(0,a)$ and satisfies $\alpha(x,y)=(x,y\+a)$. Similarly, the map $\beta(x,y)=(x,y\+b)$ is an $(Y,XY)$-elation. By Theorem~\ref{thm:abelian-elation-group}, $\alpha\comm\beta$, i.e.,
    \[
        (x,y\+a\+b)=\beta\circ\alpha(x,y)=\alpha\circ\beta(x,y)
            = (x,y\+b\+a),
    \]
    which shows that $a\+b=b\+a$, as wanted.
\end{proof}